{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect, useRef } from 'react';\nimport { useReactFlow, Position } from 'reactflow'; // Add useReactFlow\nimport { BaseNode } from './BaseNode';\nimport { useStore } from '../store';\nconst VAR_REGEX = /\\{\\{\\s*([a-zA-Z_$][a-zA-Z0-9_$]*)\\s*\\}\\}/g;\nexport const TextNode = ({\n  id,\n  data\n}) => {\n  _s();\n  const [currText, setCurrText] = useState((data === null || data === void 0 ? void 0 : data.text) || '');\n  const [dimensions, setDimensions] = useState({\n    width: 260,\n    height: 40\n  });\n  const [variables, setVariables] = useState([]);\n  const textAreaRef = useRef(null);\n  const overlayRef = useRef(null);\n  const updateNodeField = useStore(s => s.updateNodeField);\n  const {\n    applyNodeChanges\n  } = useReactFlow(); // Add this\n\n  // Existing variable extraction\n  useEffect(() => {\n    const matches = [...currText.matchAll(VAR_REGEX)].map(m => m[1]);\n    setVariables([...new Set(matches)]);\n    updateNodeField(id, 'text', currText);\n  }, [currText, id, updateNodeField]);\n\n  // Update dimensions and notify React Flow\n  useEffect(() => {\n    const ta = textAreaRef.current;\n    if (ta) {\n      // Auto height (existing)\n      ta.style.height = 'auto';\n      const newHeight = ta.scrollHeight;\n      ta.style.height = `${newHeight}px`;\n\n      // Add auto width\n      const newWidth = Math.max(260, ta.scrollWidth + 24); // Padding buffer\n\n      const change = {\n        id,\n        type: 'dimensions',\n        dimensions: {\n          width: newWidth,\n          height: newHeight\n        }\n      };\n      applyNodeChanges([change]);\n      setDimensions({\n        width: newWidth,\n        height: newHeight\n      });\n    }\n  }, [currText, id, applyNodeChanges]);\n\n  // Rest of your code unchanged (renderOverlay, sharedStyle, JSX)\n  // Update container style to use dimensions:\n  // <div style={{ position: 'relative', width: dimensions.width, height: dimensions.height, ... }}>\n\n  // ... (overlay and textarea JSX remains the same, but wrap in sized div)\n};\n_s(TextNode, \"3+idOvhFTsMua47gbUIrBC5gaLI=\", false, function () {\n  return [useStore, useReactFlow];\n});\n_c = TextNode;\nvar _c;\n$RefreshReg$(_c, \"TextNode\");","map":{"version":3,"names":["useState","useEffect","useRef","useReactFlow","Position","BaseNode","useStore","VAR_REGEX","TextNode","id","data","_s","currText","setCurrText","text","dimensions","setDimensions","width","height","variables","setVariables","textAreaRef","overlayRef","updateNodeField","s","applyNodeChanges","matches","matchAll","map","m","Set","ta","current","style","newHeight","scrollHeight","newWidth","Math","max","scrollWidth","change","type","_c","$RefreshReg$"],"sources":["/Users/maheshsamale/frontend_technical_assessment/frontend/src/nodes/textNode.js"],"sourcesContent":["import { useState, useEffect, useRef } from 'react';\nimport { useReactFlow, Position } from 'reactflow';  // Add useReactFlow\nimport { BaseNode } from './BaseNode';\nimport { useStore } from '../store';\n\nconst VAR_REGEX = /\\{\\{\\s*([a-zA-Z_$][a-zA-Z0-9_$]*)\\s*\\}\\}/g;\n\nexport const TextNode = ({ id, data }) => {\n  const [currText, setCurrText] = useState(data?.text || '');\n  const [dimensions, setDimensions] = useState({ width: 260, height: 40 });\n  const [variables, setVariables] = useState([]);\n\n  const textAreaRef = useRef(null);\n  const overlayRef = useRef(null);\n  const updateNodeField = useStore((s) => s.updateNodeField);\n  const { applyNodeChanges } = useReactFlow();  // Add this\n\n  // Existing variable extraction\n  useEffect(() => {\n    const matches = [...currText.matchAll(VAR_REGEX)].map(m => m[1]);\n    setVariables([...new Set(matches)]);\n    updateNodeField(id, 'text', currText);\n  }, [currText, id, updateNodeField]);\n\n  // Update dimensions and notify React Flow\n  useEffect(() => {\n    const ta = textAreaRef.current;\n    if (ta) {\n      // Auto height (existing)\n      ta.style.height = 'auto';\n      const newHeight = ta.scrollHeight;\n      ta.style.height = `${newHeight}px`;\n\n      // Add auto width\n      const newWidth = Math.max(260, ta.scrollWidth + 24);  // Padding buffer\n\n      const change = {\n        id,\n        type: 'dimensions',\n        dimensions: { width: newWidth, height: newHeight },\n      };\n      applyNodeChanges([change]);\n\n      setDimensions({ width: newWidth, height: newHeight });\n    }\n  }, [currText, id, applyNodeChanges]);\n\n  // Rest of your code unchanged (renderOverlay, sharedStyle, JSX)\n  // Update container style to use dimensions:\n  // <div style={{ position: 'relative', width: dimensions.width, height: dimensions.height, ... }}>\n\n  // ... (overlay and textarea JSX remains the same, but wrap in sized div)\n};\n"],"mappings":";AAAA,SAASA,QAAQ,EAAEC,SAAS,EAAEC,MAAM,QAAQ,OAAO;AACnD,SAASC,YAAY,EAAEC,QAAQ,QAAQ,WAAW,CAAC,CAAE;AACrD,SAASC,QAAQ,QAAQ,YAAY;AACrC,SAASC,QAAQ,QAAQ,UAAU;AAEnC,MAAMC,SAAS,GAAG,2CAA2C;AAE7D,OAAO,MAAMC,QAAQ,GAAGA,CAAC;EAAEC,EAAE;EAAEC;AAAK,CAAC,KAAK;EAAAC,EAAA;EACxC,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGb,QAAQ,CAAC,CAAAU,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEI,IAAI,KAAI,EAAE,CAAC;EAC1D,MAAM,CAACC,UAAU,EAAEC,aAAa,CAAC,GAAGhB,QAAQ,CAAC;IAAEiB,KAAK,EAAE,GAAG;IAAEC,MAAM,EAAE;EAAG,CAAC,CAAC;EACxE,MAAM,CAACC,SAAS,EAAEC,YAAY,CAAC,GAAGpB,QAAQ,CAAC,EAAE,CAAC;EAE9C,MAAMqB,WAAW,GAAGnB,MAAM,CAAC,IAAI,CAAC;EAChC,MAAMoB,UAAU,GAAGpB,MAAM,CAAC,IAAI,CAAC;EAC/B,MAAMqB,eAAe,GAAGjB,QAAQ,CAAEkB,CAAC,IAAKA,CAAC,CAACD,eAAe,CAAC;EAC1D,MAAM;IAAEE;EAAiB,CAAC,GAAGtB,YAAY,CAAC,CAAC,CAAC,CAAE;;EAE9C;EACAF,SAAS,CAAC,MAAM;IACd,MAAMyB,OAAO,GAAG,CAAC,GAAGd,QAAQ,CAACe,QAAQ,CAACpB,SAAS,CAAC,CAAC,CAACqB,GAAG,CAACC,CAAC,IAAIA,CAAC,CAAC,CAAC,CAAC,CAAC;IAChET,YAAY,CAAC,CAAC,GAAG,IAAIU,GAAG,CAACJ,OAAO,CAAC,CAAC,CAAC;IACnCH,eAAe,CAACd,EAAE,EAAE,MAAM,EAAEG,QAAQ,CAAC;EACvC,CAAC,EAAE,CAACA,QAAQ,EAAEH,EAAE,EAAEc,eAAe,CAAC,CAAC;;EAEnC;EACAtB,SAAS,CAAC,MAAM;IACd,MAAM8B,EAAE,GAAGV,WAAW,CAACW,OAAO;IAC9B,IAAID,EAAE,EAAE;MACN;MACAA,EAAE,CAACE,KAAK,CAACf,MAAM,GAAG,MAAM;MACxB,MAAMgB,SAAS,GAAGH,EAAE,CAACI,YAAY;MACjCJ,EAAE,CAACE,KAAK,CAACf,MAAM,GAAG,GAAGgB,SAAS,IAAI;;MAElC;MACA,MAAME,QAAQ,GAAGC,IAAI,CAACC,GAAG,CAAC,GAAG,EAAEP,EAAE,CAACQ,WAAW,GAAG,EAAE,CAAC,CAAC,CAAE;;MAEtD,MAAMC,MAAM,GAAG;QACb/B,EAAE;QACFgC,IAAI,EAAE,YAAY;QAClB1B,UAAU,EAAE;UAAEE,KAAK,EAAEmB,QAAQ;UAAElB,MAAM,EAAEgB;QAAU;MACnD,CAAC;MACDT,gBAAgB,CAAC,CAACe,MAAM,CAAC,CAAC;MAE1BxB,aAAa,CAAC;QAAEC,KAAK,EAAEmB,QAAQ;QAAElB,MAAM,EAAEgB;MAAU,CAAC,CAAC;IACvD;EACF,CAAC,EAAE,CAACtB,QAAQ,EAAEH,EAAE,EAAEgB,gBAAgB,CAAC,CAAC;;EAEpC;EACA;EACA;;EAEA;AACF,CAAC;AAACd,EAAA,CA7CWH,QAAQ;EAAA,QAOKF,QAAQ,EACHH,YAAY;AAAA;AAAAuC,EAAA,GAR9BlC,QAAQ;AAAA,IAAAkC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}