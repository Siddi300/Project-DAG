{"ast":null,"code":"var _jsxFileName = \"/Users/maheshsamale/frontend_technical_assessment/frontend/src/nodes/textNode.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect, useRef } from 'react';\nimport { Position } from 'reactflow';\nimport { BaseNode } from './BaseNode';\nimport { useStore } from '../store';\nimport { labelStyle } from \"../styles\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const TextNode = ({\n  id,\n  data\n}) => {\n  _s();\n  const [currText, setCurrText] = useState((data === null || data === void 0 ? void 0 : data.text) || 'type {{input}} here');\n  const [variables, setVariables] = useState([]);\n  const updateNodeField = useStore(s => s.updateNodeField);\n  useEffect(() => {\n    // Detect variables for handles\n    const regex = /\\{\\{\\s*([a-zA-Z_$][a-zA-Z0-9_$]*)\\s*\\}\\}/g;\n    const matches = [...currText.matchAll(regex)].map(match => match[1]);\n    setVariables([...new Set(matches)]);\n    updateNodeField(id, 'text', currText);\n  }, [currText, id, updateNodeField]);\n  const handles = [{\n    type: 'source',\n    position: Position.Right,\n    id: 'output'\n  }, ...variables.map((v, i) => ({\n    type: 'target',\n    position: Position.Left,\n    id: v,\n    style: {\n      top: `${(i + 1) * (100 / (variables.length + 1))}%`\n    }\n  }))];\n\n  // This function converts the raw text into the Visual Pills + Text\n  const getHighlightedHtml = () => {\n    const parts = currText.split(/(\\{\\{\\s*[a-zA-Z_$][a-zA-Z0-9_$]*\\s*\\}\\})/g);\n    return parts.map((part, i) => {\n      const match = part.match(/\\{\\{\\s*([a-zA-Z_$][a-zA-Z0-9_$]*)\\s*\\}\\}/);\n      if (match) {\n        return /*#__PURE__*/_jsxDEV(\"span\", {\n          contentEditable: false,\n          style: {\n            display: 'inline-flex',\n            alignItems: 'center',\n            backgroundColor: '#eef2ff',\n            border: '1px solid #c7d2fe',\n            borderRadius: '4px',\n            padding: '2px 6px',\n            margin: '0 2px',\n            color: '#4338ca',\n            fontSize: '12px',\n            fontWeight: '600',\n            userSelect: 'none',\n            verticalAlign: 'baseline'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              marginRight: '4px',\n              fontSize: '10px'\n            },\n            children: \"\\u27A1\\uFE0F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 49,\n            columnNumber: 13\n          }, this), match[1], /*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              marginLeft: '6px',\n              color: '#94a3b8',\n              cursor: 'pointer'\n            },\n            children: \"\\xD7\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 51,\n            columnNumber: 13\n          }, this)]\n        }, i, true, {\n          fileName: _jsxFileName,\n          lineNumber: 35,\n          columnNumber: 11\n        }, this);\n      }\n      return part;\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(BaseNode, {\n    id: id,\n    label: \"Text\",\n    handles: handles,\n    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n      style: labelStyle,\n      children: \"CONTENT\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        padding: '10px'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          minHeight: '80px',\n          width: '200px',\n          backgroundColor: '#f8fafc',\n          border: '1.5px solid #e2e8f0',\n          borderRadius: '8px',\n          padding: '12px',\n          fontSize: '13px',\n          lineHeight: '1.6',\n          fontFamily: 'sans-serif',\n          outline: 'none',\n          color: '#334155',\n          cursor: 'text',\n          wordBreak: 'break-word',\n          whiteSpace: 'pre-wrap'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            pointerEvents: 'none',\n            position: 'absolute',\n            opacity: 0\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          value: currText,\n          onChange: e => setCurrText(e.target.value),\n          placeholder: \"Type {{variable}}...\",\n          style: {\n            width: '100%',\n            height: '100%',\n            border: 'none',\n            outline: 'none',\n            background: 'transparent',\n            resize: 'none',\n            fontFamily: 'inherit',\n            fontSize: 'inherit',\n            color: 'transparent',\n            // Hide the raw text\n            caretColor: '#6366f1',\n            // Show the cursor\n            position: 'absolute',\n            top: '12px',\n            left: '12px',\n            zIndex: 2\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            position: 'relative',\n            zIndex: 1\n          },\n          children: getHighlightedHtml()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 60,\n    columnNumber: 5\n  }, this);\n};\n_s(TextNode, \"ZzJyVCh9vSWzzQEVkmLMCR3DDOY=\", false, function () {\n  return [useStore];\n});\n_c = TextNode;\nvar _c;\n$RefreshReg$(_c, \"TextNode\");","map":{"version":3,"names":["useState","useEffect","useRef","Position","BaseNode","useStore","labelStyle","jsxDEV","_jsxDEV","TextNode","id","data","_s","currText","setCurrText","text","variables","setVariables","updateNodeField","s","regex","matches","matchAll","map","match","Set","handles","type","position","Right","v","i","Left","style","top","length","getHighlightedHtml","parts","split","part","contentEditable","display","alignItems","backgroundColor","border","borderRadius","padding","margin","color","fontSize","fontWeight","userSelect","verticalAlign","children","marginRight","fileName","_jsxFileName","lineNumber","columnNumber","marginLeft","cursor","label","minHeight","width","lineHeight","fontFamily","outline","wordBreak","whiteSpace","pointerEvents","opacity","value","onChange","e","target","placeholder","height","background","resize","caretColor","left","zIndex","_c","$RefreshReg$"],"sources":["/Users/maheshsamale/frontend_technical_assessment/frontend/src/nodes/textNode.js"],"sourcesContent":["import { useState, useEffect, useRef } from 'react';\nimport { Position } from 'reactflow';\nimport { BaseNode } from './BaseNode';\nimport { useStore } from '../store';\nimport { labelStyle } from \"../styles\";\n\nexport const TextNode = ({ id, data }) => {\n  const [currText, setCurrText] = useState(data?.text || 'type {{input}} here');\n  const [variables, setVariables] = useState([]);\n  const updateNodeField = useStore((s) => s.updateNodeField);\n\n  useEffect(() => {\n    // Detect variables for handles\n    const regex = /\\{\\{\\s*([a-zA-Z_$][a-zA-Z0-9_$]*)\\s*\\}\\}/g;\n    const matches = [...currText.matchAll(regex)].map(match => match[1]);\n    setVariables([...new Set(matches)]);\n    updateNodeField(id, 'text', currText);\n  }, [currText, id, updateNodeField]);\n\n  const handles = [\n    { type: 'source', position: Position.Right, id: 'output' },\n    ...variables.map((v, i) => ({\n      type: 'target', position: Position.Left, id: v,\n      style: { top: `${(i + 1) * (100 / (variables.length + 1))}%` }\n    }))\n  ];\n\n  // This function converts the raw text into the Visual Pills + Text\n  const getHighlightedHtml = () => {\n    const parts = currText.split(/(\\{\\{\\s*[a-zA-Z_$][a-zA-Z0-9_$]*\\s*\\}\\})/g);\n    return parts.map((part, i) => {\n      const match = part.match(/\\{\\{\\s*([a-zA-Z_$][a-zA-Z0-9_$]*)\\s*\\}\\}/);\n      if (match) {\n        return (\n          <span key={i} contentEditable={false} style={{\n            display: 'inline-flex',\n            alignItems: 'center',\n            backgroundColor: '#eef2ff',\n            border: '1px solid #c7d2fe',\n            borderRadius: '4px',\n            padding: '2px 6px',\n            margin: '0 2px',\n            color: '#4338ca',\n            fontSize: '12px',\n            fontWeight: '600',\n            userSelect: 'none',\n            verticalAlign: 'baseline'\n          }}>\n            <span style={{ marginRight: '4px', fontSize: '10px' }}>➡️</span>\n            {match[1]}\n            <span style={{ marginLeft: '6px', color: '#94a3b8', cursor: 'pointer' }}>×</span>\n          </span>\n        );\n      }\n      return part;\n    });\n  };\n\n  return (\n    <BaseNode id={id} label=\"Text\" handles={handles}>\n      <label style={labelStyle}>CONTENT</label>\n      <div style={{ padding: '10px' }}>\n        <div \n          style={{\n            minHeight: '80px',\n            width: '200px',\n            backgroundColor: '#f8fafc',\n            border: '1.5px solid #e2e8f0',\n            borderRadius: '8px',\n            padding: '12px',\n            fontSize: '13px',\n            lineHeight: '1.6',\n            fontFamily: 'sans-serif',\n            outline: 'none',\n            color: '#334155',\n            cursor: 'text',\n            wordBreak: 'break-word',\n            whiteSpace: 'pre-wrap'\n          }}\n        >\n          {/* This renders the visual pills while keeping the text editable */}\n          <div style={{ pointerEvents: 'none', position: 'absolute', opacity: 0 }}>\n             {/* Hidden input to capture text changes if needed */}\n          </div>\n          \n          <textarea\n            value={currText}\n            onChange={(e) => setCurrText(e.target.value)}\n            placeholder=\"Type {{variable}}...\"\n            style={{\n                width: '100%',\n                height: '100%',\n                border: 'none',\n                outline: 'none',\n                background: 'transparent',\n                resize: 'none',\n                fontFamily: 'inherit',\n                fontSize: 'inherit',\n                color: 'transparent', // Hide the raw text\n                caretColor: '#6366f1', // Show the cursor\n                position: 'absolute',\n                top: '12px',\n                left: '12px',\n                zIndex: 2,\n            }}\n          />\n          \n          <div style={{ position: 'relative', zIndex: 1 }}>\n            {getHighlightedHtml()}\n          </div>\n        </div>\n      </div>\n    </BaseNode>\n  );\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}