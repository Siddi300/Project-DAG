{"ast":null,"code":"var _jsxFileName = \"/Users/maheshsamale/frontend_technical_assessment/frontend/src/nodes/textNode.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect, useRef } from 'react';\nimport { Position } from 'reactflow';\nimport { BaseNode } from './BaseNode';\nimport { useStore } from '../store';\nimport { nodeInputStyle, labelStyle, onFieldFocus, onFieldBlur } from \"../styles\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const TextNode = ({\n  id,\n  data\n}) => {\n  _s();\n  const [currText, setCurrText] = useState((data === null || data === void 0 ? void 0 : data.text) || '{{input}}');\n  const [variables, setVariables] = useState([]);\n  const textAreaRef = useRef(null);\n  const updateNodeField = useStore(s => s.updateNodeField);\n  useEffect(() => {\n    const regex = /\\{\\{\\s*([a-zA-Z_$][a-zA-Z0-9_$]*)\\s*\\}\\}/g;\n    const matches = [...currText.matchAll(regex)].map(match => match[1]);\n    setVariables([...new Set(matches)]);\n    updateNodeField(id, 'text', currText);\n    if (textAreaRef.current) {\n      textAreaRef.current.style.height = 'auto';\n      textAreaRef.current.style.height = `${textAreaRef.current.scrollHeight}px`;\n    }\n  }, [currText, id, updateNodeField]);\n  const handles = [{\n    type: 'source',\n    position: Position.Right,\n    id: 'output'\n  }, ...variables.map((v, i) => ({\n    type: 'target',\n    position: Position.Left,\n    id: v,\n    style: {\n      top: `${(i + 1) * (100 / (variables.length + 1))}%`\n    }\n  }))];\n  const getHighlightedText = () => {\n    const parts = currText.split(/(\\{\\{\\s*[a-zA-Z_$][a-zA-Z0-9_$]*\\s*\\}\\})/g);\n    return parts.map((part, i) => {\n      const isVar = /\\{\\{\\s*[a-zA-Z_$][a-zA-Z0-9_$]*\\s*\\}\\}/.test(part);\n      return isVar ? /*#__PURE__*/_jsxDEV(\"span\", {\n        style: {\n          color: '#6366f1',\n          fontWeight: '700',\n          backgroundColor: '#eef2ff',\n          padding: '0 2px',\n          borderRadius: '2px'\n        },\n        children: part\n      }, i, false, {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 22\n      }, this) : part;\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(BaseNode, {\n    id: id,\n    label: \"Text\",\n    handles: handles,\n    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n      style: labelStyle,\n      children: \"Content\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: 'relative'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          ...nodeInputStyle,\n          position: 'absolute',\n          pointerEvents: 'none',\n          color: 'transparent',\n          whiteSpace: 'pre-wrap',\n          border: '1.5px solid transparent'\n        },\n        children: getHighlightedText()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        ref: textAreaRef,\n        value: currText,\n        onChange: e => setCurrText(e.target.value),\n        onFocus: onFieldFocus,\n        onBlur: onFieldBlur,\n        style: {\n          ...nodeInputStyle,\n          background: 'transparent',\n          resize: 'none',\n          overflow: 'hidden'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 42,\n    columnNumber: 5\n  }, this);\n};\n_s(TextNode, \"qEU2TTK0b2X0yPMClxLwa15Cjeo=\", false, function () {\n  return [useStore];\n});\n_c = TextNode;\nvar _c;\n$RefreshReg$(_c, \"TextNode\");","map":{"version":3,"names":["useState","useEffect","useRef","Position","BaseNode","useStore","nodeInputStyle","labelStyle","onFieldFocus","onFieldBlur","jsxDEV","_jsxDEV","TextNode","id","data","_s","currText","setCurrText","text","variables","setVariables","textAreaRef","updateNodeField","s","regex","matches","matchAll","map","match","Set","current","style","height","scrollHeight","handles","type","position","Right","v","i","Left","top","length","getHighlightedText","parts","split","part","isVar","test","color","fontWeight","backgroundColor","padding","borderRadius","children","fileName","_jsxFileName","lineNumber","columnNumber","label","pointerEvents","whiteSpace","border","ref","value","onChange","e","target","onFocus","onBlur","background","resize","overflow","_c","$RefreshReg$"],"sources":["/Users/maheshsamale/frontend_technical_assessment/frontend/src/nodes/textNode.js"],"sourcesContent":["import { useState, useEffect, useRef } from 'react';\nimport { Position } from 'reactflow';\nimport { BaseNode } from './BaseNode';\nimport { useStore } from '../store';\nimport { nodeInputStyle, labelStyle, onFieldFocus, onFieldBlur } from \"../styles\";\n\nexport const TextNode = ({ id, data }) => {\n  const [currText, setCurrText] = useState(data?.text || '{{input}}');\n  const [variables, setVariables] = useState([]);\n  const textAreaRef = useRef(null);\n  const updateNodeField = useStore((s) => s.updateNodeField);\n\n  useEffect(() => {\n    const regex = /\\{\\{\\s*([a-zA-Z_$][a-zA-Z0-9_$]*)\\s*\\}\\}/g;\n    const matches = [...currText.matchAll(regex)].map(match => match[1]);\n    setVariables([...new Set(matches)]);\n    updateNodeField(id, 'text', currText);\n\n    if (textAreaRef.current) {\n      textAreaRef.current.style.height = 'auto';\n      textAreaRef.current.style.height = `${textAreaRef.current.scrollHeight}px`;\n    }\n  }, [currText, id, updateNodeField]);\n\n  const handles = [\n    { type: 'source', position: Position.Right, id: 'output' },\n    ...variables.map((v, i) => ({\n      type: 'target', position: Position.Left, id: v,\n      style: { top: `${(i + 1) * (100 / (variables.length + 1))}%` }\n    }))\n  ];\n\n  const getHighlightedText = () => {\n    const parts = currText.split(/(\\{\\{\\s*[a-zA-Z_$][a-zA-Z0-9_$]*\\s*\\}\\})/g);\n    return parts.map((part, i) => {\n      const isVar = /\\{\\{\\s*[a-zA-Z_$][a-zA-Z0-9_$]*\\s*\\}\\}/.test(part);\n      return isVar ? <span key={i} style={{ color: '#6366f1', fontWeight: '700', backgroundColor: '#eef2ff', padding: '0 2px', borderRadius: '2px' }}>{part}</span> : part;\n    });\n  };\n\n  return (\n    <BaseNode id={id} label=\"Text\" handles={handles}>\n      <label style={labelStyle}>Content</label>\n      <div style={{ position: 'relative' }}>\n        <div style={{ ...nodeInputStyle, position: 'absolute', pointerEvents: 'none', color: 'transparent', whiteSpace: 'pre-wrap', border: '1.5px solid transparent' }}>\n          {getHighlightedText()}\n        </div>\n        <textarea \n          ref={textAreaRef} value={currText} onChange={(e) => setCurrText(e.target.value)}\n          onFocus={onFieldFocus} onBlur={onFieldBlur}\n          style={{ ...nodeInputStyle, background: 'transparent', resize: 'none', overflow: 'hidden' }} \n        />\n      </div>\n    </BaseNode>\n  );\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}