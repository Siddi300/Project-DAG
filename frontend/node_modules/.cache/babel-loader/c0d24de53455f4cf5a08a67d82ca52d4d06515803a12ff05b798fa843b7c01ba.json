{"ast":null,"code":"var _jsxFileName = \"/Users/maheshsamale/frontend_technical_assessment/frontend/src/nodes/textNode.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect, useRef } from 'react';\nimport { Position } from 'reactflow';\nimport { BaseNode } from './BaseNode';\nimport { useStore } from '../store';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const TextNode = ({\n  id,\n  data\n}) => {\n  _s();\n  const [currText, setCurrText] = useState((data === null || data === void 0 ? void 0 : data.text) || '');\n  const [variables, setVariables] = useState([]);\n  const textAreaRef = useRef(null);\n  const updateNodeField = useStore(s => s.updateNodeField);\n\n  /**\n   * Detect variables like {{ myVar }}\n   */\n  useEffect(() => {\n    const regex = /\\{\\{\\s*([a-zA-Z_$][a-zA-Z0-9_$]*)\\s*\\}\\}/g;\n    const matches = [...currText.matchAll(regex)].map(match => match[1]);\n    const uniqueVars = [...new Set(matches)];\n    setVariables(uniqueVars);\n\n    // Save text to store\n    updateNodeField(id, 'text', currText);\n  }, [currText, id, updateNodeField]);\n\n  /**\n   * Auto resize textarea height\n   */\n  useEffect(() => {\n    if (textAreaRef.current) {\n      textAreaRef.current.style.height = \"auto\";\n      textAreaRef.current.style.height = textAreaRef.current.scrollHeight + \"px\";\n    }\n  }, [currText]);\n  const sharedStyles = {\n    padding: '12px',\n    fontSize: '14px',\n    lineHeight: '22px',\n    fontFamily: '\"Fira Code\", monospace',\n    whiteSpace: 'pre-wrap',\n    wordWrap: 'break-word',\n    width: '100%',\n    minHeight: '80px',\n    boxSizing: 'border-box',\n    margin: 0,\n    border: 'none'\n  };\n\n  /**\n   * Visual layer renders colored variable pills\n   */\n  const renderVisualLayer = () => {\n    const parts = currText.split(/(\\{\\{\\s*[a-zA-Z_$][a-zA-Z0-9_$]*\\s*\\}\\})/g);\n    return parts.map((part, i) => {\n      const match = part.match(/\\{\\{\\s*([a-zA-Z_$][a-zA-Z0-9_$]*)\\s*\\}\\}/);\n      if (match) {\n        const varName = match[1];\n        const isValid = /^[a-zA-Z_$][a-zA-Z0-9_$]*$/.test(varName);\n        return /*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            backgroundColor: isValid ? '#eef2ff' : '#fee2e2',\n            border: isValid ? '1px solid #c7d2fe' : '1px solid #fecaca',\n            borderRadius: '4px',\n            color: isValid ? '#4338ca' : '#b91c1c',\n            fontWeight: '600',\n            padding: '0 4px',\n            margin: '0 1px',\n            display: 'inline-block',\n            lineHeight: '1.2'\n          },\n          children: varName\n        }, i, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 11\n        }, this);\n      }\n      return /*#__PURE__*/_jsxDEV(\"span\", {\n        style: {\n          color: '#334155'\n        },\n        children: part\n      }, i, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }, this);\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(BaseNode, {\n    id: id,\n    label: `Text (${variables.length} variables)`,\n    handles: variables.map((v, i) => ({\n      type: 'target',\n      position: Position.Left,\n      id: `${id}-${v}`,\n      // unique handle id\n      style: {\n        top: `${(i + 1) * (100 / (variables.length + 1))}%`\n      }\n    })),\n    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n      style: {\n        display: 'block',\n        fontSize: '10px',\n        fontWeight: 'bold',\n        color: '#64748b',\n        marginBottom: '8px'\n      },\n      children: \"CONTENT\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: 'relative',\n        width: '240px',\n        backgroundColor: '#f8fafc',\n        borderRadius: '8px',\n        border: '1px solid #e2e8f0',\n        minHeight: '80px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          ...sharedStyles,\n          position: 'relative',\n          zIndex: 0,\n          pointerEvents: 'none'\n        },\n        children: [renderVisualLayer(), currText === '' && /*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            color: '#94a3b8'\n          },\n          children: [\"Type \", '{{variable}}', \"...\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 3\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        ref: textAreaRef,\n        value: currText,\n        onChange: e => setCurrText(e.target.value),\n        spellCheck: false,\n        style: {\n          ...sharedStyles,\n          position: 'absolute',\n          top: 0,\n          left: 0,\n          zIndex: 1,\n          background: 'transparent',\n          color: 'transparent',\n          caretColor: '#334155',\n          outline: 'none',\n          resize: 'none',\n          height: '100%',\n          overflow: 'hidden'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 98,\n    columnNumber: 5\n  }, this);\n};\n_s(TextNode, \"TjqTWA+TpFktiut/yMDqEOD2r6U=\", false, function () {\n  return [useStore];\n});\n_c = TextNode;\nvar _c;\n$RefreshReg$(_c, \"TextNode\");","map":{"version":3,"names":["useState","useEffect","useRef","Position","BaseNode","useStore","jsxDEV","_jsxDEV","TextNode","id","data","_s","currText","setCurrText","text","variables","setVariables","textAreaRef","updateNodeField","s","regex","matches","matchAll","map","match","uniqueVars","Set","current","style","height","scrollHeight","sharedStyles","padding","fontSize","lineHeight","fontFamily","whiteSpace","wordWrap","width","minHeight","boxSizing","margin","border","renderVisualLayer","parts","split","part","i","varName","isValid","test","backgroundColor","borderRadius","color","fontWeight","display","children","fileName","_jsxFileName","lineNumber","columnNumber","label","length","handles","v","type","position","Left","top","marginBottom","zIndex","pointerEvents","ref","value","onChange","e","target","spellCheck","left","background","caretColor","outline","resize","overflow","_c","$RefreshReg$"],"sources":["/Users/maheshsamale/frontend_technical_assessment/frontend/src/nodes/textNode.js"],"sourcesContent":["import { useState, useEffect, useRef } from 'react';\nimport { Position } from 'reactflow';\nimport { BaseNode } from './BaseNode';\nimport { useStore } from '../store';\n\nexport const TextNode = ({ id, data }) => {\n  const [currText, setCurrText] = useState(data?.text || '');\n  const [variables, setVariables] = useState([]);\n  const textAreaRef = useRef(null);\n\n  const updateNodeField = useStore((s) => s.updateNodeField);\n\n  /**\n   * Detect variables like {{ myVar }}\n   */\n  useEffect(() => {\n    const regex = /\\{\\{\\s*([a-zA-Z_$][a-zA-Z0-9_$]*)\\s*\\}\\}/g;\n    const matches = [...currText.matchAll(regex)].map(match => match[1]);\n\n    const uniqueVars = [...new Set(matches)];\n    setVariables(uniqueVars);\n\n    // Save text to store\n    updateNodeField(id, 'text', currText);\n  }, [currText, id, updateNodeField]);\n\n  /**\n   * Auto resize textarea height\n   */\n  useEffect(() => {\n    if (textAreaRef.current) {\n      textAreaRef.current.style.height = \"auto\";\n      textAreaRef.current.style.height =\n        textAreaRef.current.scrollHeight + \"px\";\n    }\n  }, [currText]);\n\n  const sharedStyles = {\n    padding: '12px',\n    fontSize: '14px',\n    lineHeight: '22px',\n    fontFamily: '\"Fira Code\", monospace',\n    whiteSpace: 'pre-wrap',\n    wordWrap: 'break-word',\n    width: '100%',\n    minHeight: '80px',\n    boxSizing: 'border-box',\n    margin: 0,\n    border: 'none',\n  };\n\n  /**\n   * Visual layer renders colored variable pills\n   */\n  const renderVisualLayer = () => {\n    const parts = currText.split(\n      /(\\{\\{\\s*[a-zA-Z_$][a-zA-Z0-9_$]*\\s*\\}\\})/g\n    );\n\n    return parts.map((part, i) => {\n      const match = part.match(/\\{\\{\\s*([a-zA-Z_$][a-zA-Z0-9_$]*)\\s*\\}\\}/);\n\n      if (match) {\n        const varName = match[1];\n        const isValid = /^[a-zA-Z_$][a-zA-Z0-9_$]*$/.test(varName);\n\n        return (\n          <span\n            key={i}\n            style={{\n              backgroundColor: isValid ? '#eef2ff' : '#fee2e2',\n              border: isValid\n                ? '1px solid #c7d2fe'\n                : '1px solid #fecaca',\n              borderRadius: '4px',\n              color: isValid ? '#4338ca' : '#b91c1c',\n              fontWeight: '600',\n              padding: '0 4px',\n              margin: '0 1px',\n              display: 'inline-block',\n              lineHeight: '1.2',\n            }}\n          >\n            {varName}\n          </span>\n        );\n      }\n\n      return (\n        <span key={i} style={{ color: '#334155' }}>\n          {part}\n        </span>\n      );\n    });\n  };\n\n  return (\n    <BaseNode\n      id={id}\n      label={`Text (${variables.length} variables)`}\n      handles={variables.map((v, i) => ({\n        type: 'target',\n        position: Position.Left,\n        id: `${id}-${v}`,     // unique handle id\n        style: {\n          top: `${(i + 1) * (100 / (variables.length + 1))}%`,\n        },\n      }))}\n    >\n      <label\n        style={{\n          display: 'block',\n          fontSize: '10px',\n          fontWeight: 'bold',\n          color: '#64748b',\n          marginBottom: '8px',\n        }}\n      >\n        CONTENT\n      </label>\n\n      <div\n        style={{\n          position: 'relative',\n          width: '240px',\n          backgroundColor: '#f8fafc',\n          borderRadius: '8px',\n          border: '1px solid #e2e8f0',\n          minHeight: '80px',\n        }}\n      >\n        {/* VISUAL LAYER */}\n        <div\n          style={{\n            ...sharedStyles,\n            position: 'relative',\n            zIndex: 0,\n            pointerEvents: 'none',\n          }}\n        >\n          {renderVisualLayer()}\n          {currText === '' && (\n  <span style={{ color: '#94a3b8' }}>\n    Type {'{{variable}}'}...\n  </span>\n)}\n\n        </div>\n\n        {/* GHOST INPUT */}\n        <textarea\n          ref={textAreaRef}\n          value={currText}\n          onChange={(e) => setCurrText(e.target.value)}\n          spellCheck={false}\n          style={{\n            ...sharedStyles,\n            position: 'absolute',\n            top: 0,\n            left: 0,\n            zIndex: 1,\n            background: 'transparent',\n            color: 'transparent',\n            caretColor: '#334155',\n            outline: 'none',\n            resize: 'none',\n            height: '100%',\n            overflow: 'hidden',\n          }}\n        />\n      </div>\n    </BaseNode>\n  );\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}