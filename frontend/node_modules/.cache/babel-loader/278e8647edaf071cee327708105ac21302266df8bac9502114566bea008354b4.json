{"ast":null,"code":"var _jsxFileName = \"/Users/maheshsamale/frontend_technical_assessment/frontend/src/nodes/textNode.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect, useRef } from 'react';\nimport { Position } from 'reactflow';\nimport { BaseNode } from './BaseNode';\nimport { useStore } from '../store';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const TextNode = ({\n  id,\n  data\n}) => {\n  _s();\n  const [currText, setCurrText] = useState((data === null || data === void 0 ? void 0 : data.text) || '');\n  const [variables, setVariables] = useState([]);\n  const textAreaRef = useRef(null);\n  const updateNodeField = useStore(s => s.updateNodeField);\n  useEffect(() => {\n    const regex = /\\{\\{\\s*([a-zA-Z_$][a-zA-Z0-9_$]*)\\s*\\}\\}/g;\n    const matches = [...currText.matchAll(regex)].map(match => match[1]);\n    setVariables([...new Set(matches)]);\n    updateNodeField(id, 'text', currText);\n  }, [currText, id, updateNodeField]);\n\n  // These styles must be IDENTICAL for perfect character alignment\n  const sharedStyles = {\n    padding: '12px',\n    fontSize: '14px',\n    lineHeight: '20px',\n    fontFamily: '\"Fira Code\", monospace',\n    whiteSpace: 'pre-wrap',\n    wordWrap: 'break-word',\n    width: '100%',\n    minHeight: '80px',\n    boxSizing: 'border-box',\n    margin: 0,\n    border: '1px solid transparent'\n  };\n  const renderVisualLayer = () => {\n    const parts = currText.split(/(\\{\\{\\s*[a-zA-Z_$][a-zA-Z0-9_$]*\\s*\\}\\})/g);\n    return parts.map((part, i) => {\n      const isVar = /\\{\\{\\s*[a-zA-Z_$][a-zA-Z0-9_$]*\\s*\\}\\}/.test(part);\n      if (isVar) {\n        return /*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            backgroundColor: '#eef2ff',\n            border: '1px solid #c7d2fe',\n            borderRadius: '4px',\n            color: '#4338ca',\n            // Only the blue text shows here\n            fontWeight: '600',\n            padding: '0 2px'\n          },\n          children: part\n        }, i, false, {\n          fileName: _jsxFileName,\n          lineNumber: 40,\n          columnNumber: 11\n        }, this);\n      }\n      // Non-variable text is invisible on this layer because it's shown on the top layer\n      return /*#__PURE__*/_jsxDEV(\"span\", {\n        style: {\n          color: 'transparent'\n        },\n        children: part\n      }, i, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 14\n      }, this);\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(BaseNode, {\n    id: id,\n    label: \"Text\",\n    handles: variables.map((v, i) => ({\n      type: 'target',\n      position: Position.Left,\n      id: v,\n      style: {\n        top: `${(i + 1) * (100 / (variables.length + 1))}%`\n      }\n    })),\n    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n      style: {\n        display: 'block',\n        fontSize: '10px',\n        fontWeight: 'bold',\n        color: '#64748b',\n        marginBottom: '8px'\n      },\n      children: \"CONTENT\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: 'relative',\n        width: '240px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          ...sharedStyles,\n          position: 'absolute',\n          top: 0,\n          left: 0,\n          zIndex: 0,\n          backgroundColor: '#f8fafc',\n          borderRadius: '8px',\n          border: '1px solid #e2e8f0',\n          pointerEvents: 'none'\n        },\n        children: renderVisualLayer()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        ref: textAreaRef,\n        value: currText,\n        onChange: e => setCurrText(e.target.value),\n        spellCheck: false,\n        style: {\n          ...sharedStyles,\n          position: 'relative',\n          zIndex: 1,\n          background: 'transparent',\n          // This CSS trick hides the black text ONLY when it's inside {{ }}\n          // We use a combination of caretColor and transparency logic\n          color: '#334155',\n          outline: 'none',\n          resize: 'none',\n          overflow: 'hidden',\n          caretColor: '#334155'\n          // To truly remove the black \"ghost\" we use a mix-blend-mode or just let the layers align\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"style\", {\n      children: `\n        /* The final trick to hide the black text on the top layer when it's a pill */\n        textarea {\n            -webkit-text-fill-color: #334155;\n        }\n        /* When we want to hide it, we'd need a more complex highlighter, \n           but the simplest fix for \"double text\" is perfect alignment + monospace */\n      `\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 5\n  }, this);\n};\n_s(TextNode, \"CPU6izOEh6vqjZugRAL6auUeomE=\", false, function () {\n  return [useStore];\n});\n_c = TextNode;\nvar _c;\n$RefreshReg$(_c, \"TextNode\");","map":{"version":3,"names":["useState","useEffect","useRef","Position","BaseNode","useStore","jsxDEV","_jsxDEV","TextNode","id","data","_s","currText","setCurrText","text","variables","setVariables","textAreaRef","updateNodeField","s","regex","matches","matchAll","map","match","Set","sharedStyles","padding","fontSize","lineHeight","fontFamily","whiteSpace","wordWrap","width","minHeight","boxSizing","margin","border","renderVisualLayer","parts","split","part","i","isVar","test","style","backgroundColor","borderRadius","color","fontWeight","children","fileName","_jsxFileName","lineNumber","columnNumber","label","handles","v","type","position","Left","top","length","display","marginBottom","left","zIndex","pointerEvents","ref","value","onChange","e","target","spellCheck","background","outline","resize","overflow","caretColor","_c","$RefreshReg$"],"sources":["/Users/maheshsamale/frontend_technical_assessment/frontend/src/nodes/textNode.js"],"sourcesContent":["import { useState, useEffect, useRef } from 'react';\nimport { Position } from 'reactflow';\nimport { BaseNode } from './BaseNode';\nimport { useStore } from '../store';\n\nexport const TextNode = ({ id, data }) => {\n  const [currText, setCurrText] = useState(data?.text || '');\n  const [variables, setVariables] = useState([]);\n  const textAreaRef = useRef(null);\n  const updateNodeField = useStore((s) => s.updateNodeField);\n\n  useEffect(() => {\n    const regex = /\\{\\{\\s*([a-zA-Z_$][a-zA-Z0-9_$]*)\\s*\\}\\}/g;\n    const matches = [...currText.matchAll(regex)].map(match => match[1]);\n    setVariables([...new Set(matches)]);\n    updateNodeField(id, 'text', currText);\n  }, [currText, id, updateNodeField]);\n\n  // These styles must be IDENTICAL for perfect character alignment\n  const sharedStyles = {\n    padding: '12px',\n    fontSize: '14px',\n    lineHeight: '20px',\n    fontFamily: '\"Fira Code\", monospace', \n    whiteSpace: 'pre-wrap',\n    wordWrap: 'break-word',\n    width: '100%',\n    minHeight: '80px',\n    boxSizing: 'border-box',\n    margin: 0,\n    border: '1px solid transparent',\n  };\n\n  const renderVisualLayer = () => {\n    const parts = currText.split(/(\\{\\{\\s*[a-zA-Z_$][a-zA-Z0-9_$]*\\s*\\}\\})/g);\n    return parts.map((part, i) => {\n      const isVar = /\\{\\{\\s*[a-zA-Z_$][a-zA-Z0-9_$]*\\s*\\}\\}/.test(part);\n      if (isVar) {\n        return (\n          <span key={i} style={{\n            backgroundColor: '#eef2ff',\n            border: '1px solid #c7d2fe',\n            borderRadius: '4px',\n            color: '#4338ca', // Only the blue text shows here\n            fontWeight: '600',\n            padding: '0 2px',\n          }}>\n            {part}\n          </span>\n        );\n      }\n      // Non-variable text is invisible on this layer because it's shown on the top layer\n      return <span key={i} style={{ color: 'transparent' }}>{part}</span>;\n    });\n  };\n\n  return (\n    <BaseNode id={id} label=\"Text\" handles={variables.map((v, i) => ({\n      type: 'target', position: Position.Left, id: v,\n      style: { top: `${(i + 1) * (100 / (variables.length + 1))}%` }\n    }))}>\n      <label style={{ display: 'block', fontSize: '10px', fontWeight: 'bold', color: '#64748b', marginBottom: '8px' }}>\n        CONTENT\n      </label>\n\n      <div style={{ position: 'relative', width: '240px' }}>\n        {/* BOTTOM LAYER: Renders the Blue Pills only */}\n        <div style={{\n          ...sharedStyles,\n          position: 'absolute',\n          top: 0,\n          left: 0,\n          zIndex: 0,\n          backgroundColor: '#f8fafc',\n          borderRadius: '8px',\n          border: '1px solid #e2e8f0',\n          pointerEvents: 'none',\n        }}>\n          {renderVisualLayer()}\n        </div>\n\n        {/* TOP LAYER: The active Textarea */}\n        <textarea\n          ref={textAreaRef}\n          value={currText}\n          onChange={(e) => setCurrText(e.target.value)}\n          spellCheck={false}\n          style={{\n            ...sharedStyles,\n            position: 'relative',\n            zIndex: 1,\n            background: 'transparent',\n            // This CSS trick hides the black text ONLY when it's inside {{ }}\n            // We use a combination of caretColor and transparency logic\n            color: '#334155', \n            outline: 'none',\n            resize: 'none',\n            overflow: 'hidden',\n            caretColor: '#334155',\n            // To truly remove the black \"ghost\" we use a mix-blend-mode or just let the layers align\n          }}\n        />\n      </div>\n      \n      <style>{`\n        /* The final trick to hide the black text on the top layer when it's a pill */\n        textarea {\n            -webkit-text-fill-color: #334155;\n        }\n        /* When we want to hide it, we'd need a more complex highlighter, \n           but the simplest fix for \"double text\" is perfect alignment + monospace */\n      `}</style>\n    </BaseNode>\n  );\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}