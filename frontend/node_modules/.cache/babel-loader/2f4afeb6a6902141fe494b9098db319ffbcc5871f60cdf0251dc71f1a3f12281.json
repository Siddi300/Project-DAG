{"ast":null,"code":"var _jsxFileName = \"/Users/maheshsamale/frontend_technical_assessment/frontend/src/nodes/textNode.js\",\n  _s = $RefreshSig$();\n// textNode.js\n\nimport { useState, useEffect, useRef } from \"react\";\nimport { Position } from \"reactflow\";\nimport { BaseNode } from \"./BaseNode\";\nimport { useStore } from \"../store\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst VAR_REGEX = /\\{\\{\\s*([a-zA-Z_$][a-zA-Z0-9_$.]*)\\s*\\}\\}/g;\nconst VAR_SINGLE_REGEX = /\\{\\{\\s*([a-zA-Z_$][a-zA-Z0-9_$.]*)\\s*\\}\\}/;\nexport const TextNode = ({\n  id,\n  data\n}) => {\n  _s();\n  const [currText, setCurrText] = useState((data === null || data === void 0 ? void 0 : data.text) || \"\");\n  const [variables, setVariables] = useState([]);\n  const textAreaRef = useRef(null);\n  const overlayRef = useRef(null);\n  const containerRef = useRef(null);\n  const updateNodeField = useStore(s => s.updateNodeField);\n\n  // -----------------------\n  // Extract variables\n  // -----------------------\n  useEffect(() => {\n    const matches = [...currText.matchAll(VAR_REGEX)].map(m => m[1]);\n    setVariables([...new Set(matches)]);\n    updateNodeField(id, \"text\", currText);\n  }, [currText, id, updateNodeField]);\n\n  // -----------------------\n  // Auto height only\n  // -----------------------\n  useEffect(() => {\n    const ta = textAreaRef.current;\n    const container = containerRef.current;\n    if (!ta || !container) return;\n    ta.style.height = \"auto\";\n    ta.style.height = ta.scrollHeight + \"px\";\n    container.style.height = ta.style.height;\n  }, [currText]);\n\n  // -----------------------\n  // Highlight rendering\n  // -----------------------\n  const renderOverlay = () => {\n    const parts = currText.split(/(\\{\\{\\s*[a-zA-Z_$][a-zA-Z0-9_$.]*\\s*\\}\\})/g);\n    return parts.map((part, i) => {\n      const match = part.match(VAR_SINGLE_REGEX);\n      if (match) {\n        return /*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            background: \"#eef2ff\",\n            color: \"#4338ca\",\n            borderRadius: \"6px\",\n            padding: \"1px 6px\",\n            fontWeight: 600,\n            display: \"inline-block\",\n            lineHeight: \"20px\"\n          },\n          children: match[1]\n        }, i, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 11\n        }, this);\n      }\n      return /*#__PURE__*/_jsxDEV(\"span\", {\n        children: part\n      }, i, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 14\n      }, this);\n    });\n  };\n\n  // -----------------------\n  // Shared typography\n  // -----------------------\n  const textStyle = {\n    fontFamily: \"Inter, monospace\",\n    fontSize: \"14px\",\n    lineHeight: \"22px\",\n    padding: \"10px\",\n    whiteSpace: \"pre-wrap\",\n    wordBreak: \"break-word\",\n    boxSizing: \"border-box\"\n  };\n  return /*#__PURE__*/_jsxDEV(BaseNode, {\n    id: id,\n    label: \"Text\",\n    handles: variables.map((v, i) => ({\n      type: \"target\",\n      position: Position.Left,\n      id: v,\n      style: {\n        top: `${(i + 1) * (100 / (variables.length + 1))}%`\n      }\n    })),\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: containerRef,\n      style: {\n        position: \"relative\",\n        width: \"280px\",\n        border: \"1px solid #e5e7eb\",\n        borderRadius: \"10px\",\n        background: \"#fff\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        ref: overlayRef,\n        style: {\n          ...textStyle,\n          position: \"absolute\",\n          inset: 0,\n          pointerEvents: \"none\",\n          color: \"#0f172a\",\n          overflow: \"hidden\"\n        },\n        children: [renderOverlay(), currText === \"\" && /*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            color: \"#9ca3af\"\n          },\n          children: [\"Type text or \", {\n            variable\n          }]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        ref: textAreaRef,\n        value: currText,\n        onChange: e => setCurrText(e.target.value),\n        spellCheck: false,\n        style: {\n          ...textStyle,\n          position: \"relative\",\n          width: \"100%\",\n          resize: \"none\",\n          border: \"none\",\n          outline: \"none\",\n          background: \"transparent\",\n          color: \"transparent\",\n          caretColor: \"#0f172a\",\n          overflow: \"hidden\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 91,\n    columnNumber: 5\n  }, this);\n};\n_s(TextNode, \"wNLmsR5XJKvLZTBJ1MX1mhIJ/+0=\", false, function () {\n  return [useStore];\n});\n_c = TextNode;\nvar _c;\n$RefreshReg$(_c, \"TextNode\");","map":{"version":3,"names":["useState","useEffect","useRef","Position","BaseNode","useStore","jsxDEV","_jsxDEV","VAR_REGEX","VAR_SINGLE_REGEX","TextNode","id","data","_s","currText","setCurrText","text","variables","setVariables","textAreaRef","overlayRef","containerRef","updateNodeField","s","matches","matchAll","map","m","Set","ta","current","container","style","height","scrollHeight","renderOverlay","parts","split","part","i","match","background","color","borderRadius","padding","fontWeight","display","lineHeight","children","fileName","_jsxFileName","lineNumber","columnNumber","textStyle","fontFamily","fontSize","whiteSpace","wordBreak","boxSizing","label","handles","v","type","position","Left","top","length","ref","width","border","inset","pointerEvents","overflow","variable","value","onChange","e","target","spellCheck","resize","outline","caretColor","_c","$RefreshReg$"],"sources":["/Users/maheshsamale/frontend_technical_assessment/frontend/src/nodes/textNode.js"],"sourcesContent":["// textNode.js\n\nimport { useState, useEffect, useRef } from \"react\";\nimport { Position } from \"reactflow\";\nimport { BaseNode } from \"./BaseNode\";\nimport { useStore } from \"../store\";\n\nconst VAR_REGEX = /\\{\\{\\s*([a-zA-Z_$][a-zA-Z0-9_$.]*)\\s*\\}\\}/g;\nconst VAR_SINGLE_REGEX = /\\{\\{\\s*([a-zA-Z_$][a-zA-Z0-9_$.]*)\\s*\\}\\}/;\n\nexport const TextNode = ({ id, data }) => {\n  const [currText, setCurrText] = useState(data?.text || \"\");\n  const [variables, setVariables] = useState([]);\n\n  const textAreaRef = useRef(null);\n  const overlayRef = useRef(null);\n  const containerRef = useRef(null);\n\n  const updateNodeField = useStore((s) => s.updateNodeField);\n\n  // -----------------------\n  // Extract variables\n  // -----------------------\n  useEffect(() => {\n    const matches = [...currText.matchAll(VAR_REGEX)].map((m) => m[1]);\n    setVariables([...new Set(matches)]);\n    updateNodeField(id, \"text\", currText);\n  }, [currText, id, updateNodeField]);\n\n  // -----------------------\n  // Auto height only\n  // -----------------------\n  useEffect(() => {\n    const ta = textAreaRef.current;\n    const container = containerRef.current;\n    if (!ta || !container) return;\n\n    ta.style.height = \"auto\";\n    ta.style.height = ta.scrollHeight + \"px\";\n    container.style.height = ta.style.height;\n  }, [currText]);\n\n  // -----------------------\n  // Highlight rendering\n  // -----------------------\n  const renderOverlay = () => {\n    const parts = currText.split(\n      /(\\{\\{\\s*[a-zA-Z_$][a-zA-Z0-9_$.]*\\s*\\}\\})/g\n    );\n\n    return parts.map((part, i) => {\n      const match = part.match(VAR_SINGLE_REGEX);\n\n      if (match) {\n        return (\n          <span\n            key={i}\n            style={{\n              background: \"#eef2ff\",\n              color: \"#4338ca\",\n              borderRadius: \"6px\",\n              padding: \"1px 6px\",\n              fontWeight: 600,\n              display: \"inline-block\",\n              lineHeight: \"20px\",\n            }}\n          >\n            {match[1]}\n          </span>\n        );\n      }\n\n      return <span key={i}>{part}</span>;\n    });\n  };\n\n  // -----------------------\n  // Shared typography\n  // -----------------------\n  const textStyle = {\n    fontFamily: \"Inter, monospace\",\n    fontSize: \"14px\",\n    lineHeight: \"22px\",\n    padding: \"10px\",\n    whiteSpace: \"pre-wrap\",\n    wordBreak: \"break-word\",\n    boxSizing: \"border-box\",\n  };\n\n  return (\n    <BaseNode\n      id={id}\n      label=\"Text\"\n      handles={variables.map((v, i) => ({\n        type: \"target\",\n        position: Position.Left,\n        id: v,\n        style: {\n          top: `${(i + 1) * (100 / (variables.length + 1))}%`,\n        },\n      }))}\n    >\n      <div\n        ref={containerRef}\n        style={{\n          position: \"relative\",\n          width: \"280px\",\n          border: \"1px solid #e5e7eb\",\n          borderRadius: \"10px\",\n          background: \"#fff\",\n        }}\n      >\n        {/* Overlay */}\n        <div\n          ref={overlayRef}\n          style={{\n            ...textStyle,\n            position: \"absolute\",\n            inset: 0,\n            pointerEvents: \"none\",\n            color: \"#0f172a\",\n            overflow: \"hidden\",\n          }}\n        >\n          {renderOverlay()}\n          {currText === \"\" && (\n            <span style={{ color: \"#9ca3af\" }}>Type text or {{variable}}</span>\n          )}\n        </div>\n\n        {/* Textarea */}\n        <textarea\n          ref={textAreaRef}\n          value={currText}\n          onChange={(e) => setCurrText(e.target.value)}\n          spellCheck={false}\n          style={{\n            ...textStyle,\n            position: \"relative\",\n            width: \"100%\",\n            resize: \"none\",\n            border: \"none\",\n            outline: \"none\",\n            background: \"transparent\",\n            color: \"transparent\",\n            caretColor: \"#0f172a\",\n            overflow: \"hidden\",\n          }}\n        />\n      </div>\n    </BaseNode>\n  );\n};\n"],"mappings":";;AAAA;;AAEA,SAASA,QAAQ,EAAEC,SAAS,EAAEC,MAAM,QAAQ,OAAO;AACnD,SAASC,QAAQ,QAAQ,WAAW;AACpC,SAASC,QAAQ,QAAQ,YAAY;AACrC,SAASC,QAAQ,QAAQ,UAAU;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEpC,MAAMC,SAAS,GAAG,4CAA4C;AAC9D,MAAMC,gBAAgB,GAAG,2CAA2C;AAEpE,OAAO,MAAMC,QAAQ,GAAGA,CAAC;EAAEC,EAAE;EAAEC;AAAK,CAAC,KAAK;EAAAC,EAAA;EACxC,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGf,QAAQ,CAAC,CAAAY,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEI,IAAI,KAAI,EAAE,CAAC;EAC1D,MAAM,CAACC,SAAS,EAAEC,YAAY,CAAC,GAAGlB,QAAQ,CAAC,EAAE,CAAC;EAE9C,MAAMmB,WAAW,GAAGjB,MAAM,CAAC,IAAI,CAAC;EAChC,MAAMkB,UAAU,GAAGlB,MAAM,CAAC,IAAI,CAAC;EAC/B,MAAMmB,YAAY,GAAGnB,MAAM,CAAC,IAAI,CAAC;EAEjC,MAAMoB,eAAe,GAAGjB,QAAQ,CAAEkB,CAAC,IAAKA,CAAC,CAACD,eAAe,CAAC;;EAE1D;EACA;EACA;EACArB,SAAS,CAAC,MAAM;IACd,MAAMuB,OAAO,GAAG,CAAC,GAAGV,QAAQ,CAACW,QAAQ,CAACjB,SAAS,CAAC,CAAC,CAACkB,GAAG,CAAEC,CAAC,IAAKA,CAAC,CAAC,CAAC,CAAC,CAAC;IAClET,YAAY,CAAC,CAAC,GAAG,IAAIU,GAAG,CAACJ,OAAO,CAAC,CAAC,CAAC;IACnCF,eAAe,CAACX,EAAE,EAAE,MAAM,EAAEG,QAAQ,CAAC;EACvC,CAAC,EAAE,CAACA,QAAQ,EAAEH,EAAE,EAAEW,eAAe,CAAC,CAAC;;EAEnC;EACA;EACA;EACArB,SAAS,CAAC,MAAM;IACd,MAAM4B,EAAE,GAAGV,WAAW,CAACW,OAAO;IAC9B,MAAMC,SAAS,GAAGV,YAAY,CAACS,OAAO;IACtC,IAAI,CAACD,EAAE,IAAI,CAACE,SAAS,EAAE;IAEvBF,EAAE,CAACG,KAAK,CAACC,MAAM,GAAG,MAAM;IACxBJ,EAAE,CAACG,KAAK,CAACC,MAAM,GAAGJ,EAAE,CAACK,YAAY,GAAG,IAAI;IACxCH,SAAS,CAACC,KAAK,CAACC,MAAM,GAAGJ,EAAE,CAACG,KAAK,CAACC,MAAM;EAC1C,CAAC,EAAE,CAACnB,QAAQ,CAAC,CAAC;;EAEd;EACA;EACA;EACA,MAAMqB,aAAa,GAAGA,CAAA,KAAM;IAC1B,MAAMC,KAAK,GAAGtB,QAAQ,CAACuB,KAAK,CAC1B,4CACF,CAAC;IAED,OAAOD,KAAK,CAACV,GAAG,CAAC,CAACY,IAAI,EAAEC,CAAC,KAAK;MAC5B,MAAMC,KAAK,GAAGF,IAAI,CAACE,KAAK,CAAC/B,gBAAgB,CAAC;MAE1C,IAAI+B,KAAK,EAAE;QACT,oBACEjC,OAAA;UAEEyB,KAAK,EAAE;YACLS,UAAU,EAAE,SAAS;YACrBC,KAAK,EAAE,SAAS;YAChBC,YAAY,EAAE,KAAK;YACnBC,OAAO,EAAE,SAAS;YAClBC,UAAU,EAAE,GAAG;YACfC,OAAO,EAAE,cAAc;YACvBC,UAAU,EAAE;UACd,CAAE;UAAAC,QAAA,EAEDR,KAAK,CAAC,CAAC;QAAC,GAXJD,CAAC;UAAAU,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAYF,CAAC;MAEX;MAEA,oBAAO7C,OAAA;QAAAyC,QAAA,EAAeV;MAAI,GAARC,CAAC;QAAAU,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAc,CAAC;IACpC,CAAC,CAAC;EACJ,CAAC;;EAED;EACA;EACA;EACA,MAAMC,SAAS,GAAG;IAChBC,UAAU,EAAE,kBAAkB;IAC9BC,QAAQ,EAAE,MAAM;IAChBR,UAAU,EAAE,MAAM;IAClBH,OAAO,EAAE,MAAM;IACfY,UAAU,EAAE,UAAU;IACtBC,SAAS,EAAE,YAAY;IACvBC,SAAS,EAAE;EACb,CAAC;EAED,oBACEnD,OAAA,CAACH,QAAQ;IACPO,EAAE,EAAEA,EAAG;IACPgD,KAAK,EAAC,MAAM;IACZC,OAAO,EAAE3C,SAAS,CAACS,GAAG,CAAC,CAACmC,CAAC,EAAEtB,CAAC,MAAM;MAChCuB,IAAI,EAAE,QAAQ;MACdC,QAAQ,EAAE5D,QAAQ,CAAC6D,IAAI;MACvBrD,EAAE,EAAEkD,CAAC;MACL7B,KAAK,EAAE;QACLiC,GAAG,EAAE,GAAG,CAAC1B,CAAC,GAAG,CAAC,KAAK,GAAG,IAAItB,SAAS,CAACiD,MAAM,GAAG,CAAC,CAAC,CAAC;MAClD;IACF,CAAC,CAAC,CAAE;IAAAlB,QAAA,eAEJzC,OAAA;MACE4D,GAAG,EAAE9C,YAAa;MAClBW,KAAK,EAAE;QACL+B,QAAQ,EAAE,UAAU;QACpBK,KAAK,EAAE,OAAO;QACdC,MAAM,EAAE,mBAAmB;QAC3B1B,YAAY,EAAE,MAAM;QACpBF,UAAU,EAAE;MACd,CAAE;MAAAO,QAAA,gBAGFzC,OAAA;QACE4D,GAAG,EAAE/C,UAAW;QAChBY,KAAK,EAAE;UACL,GAAGqB,SAAS;UACZU,QAAQ,EAAE,UAAU;UACpBO,KAAK,EAAE,CAAC;UACRC,aAAa,EAAE,MAAM;UACrB7B,KAAK,EAAE,SAAS;UAChB8B,QAAQ,EAAE;QACZ,CAAE;QAAAxB,QAAA,GAEDb,aAAa,CAAC,CAAC,EACfrB,QAAQ,KAAK,EAAE,iBACdP,OAAA;UAAMyB,KAAK,EAAE;YAAEU,KAAK,EAAE;UAAU,CAAE;UAAAM,QAAA,GAAC,eAAa,EAAC;YAACyB;UAAQ,CAAC;QAAA;UAAAxB,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAO,CACnE;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACE,CAAC,eAGN7C,OAAA;QACE4D,GAAG,EAAEhD,WAAY;QACjBuD,KAAK,EAAE5D,QAAS;QAChB6D,QAAQ,EAAGC,CAAC,IAAK7D,WAAW,CAAC6D,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE;QAC7CI,UAAU,EAAE,KAAM;QAClB9C,KAAK,EAAE;UACL,GAAGqB,SAAS;UACZU,QAAQ,EAAE,UAAU;UACpBK,KAAK,EAAE,MAAM;UACbW,MAAM,EAAE,MAAM;UACdV,MAAM,EAAE,MAAM;UACdW,OAAO,EAAE,MAAM;UACfvC,UAAU,EAAE,aAAa;UACzBC,KAAK,EAAE,aAAa;UACpBuC,UAAU,EAAE,SAAS;UACrBT,QAAQ,EAAE;QACZ;MAAE;QAAAvB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACC;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACE,CAAC;AAEf,CAAC;AAACvC,EAAA,CA9IWH,QAAQ;EAAA,QAQKL,QAAQ;AAAA;AAAA6E,EAAA,GARrBxE,QAAQ;AAAA,IAAAwE,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}