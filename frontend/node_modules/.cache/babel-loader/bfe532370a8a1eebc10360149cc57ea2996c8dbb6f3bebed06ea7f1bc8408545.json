{"ast":null,"code":"var _jsxFileName = \"/Users/maheshsamale/frontend_technical_assessment/frontend/src/nodes/textNode.js\",\n  _s = $RefreshSig$();\n// textNode.js refined\nimport { useState, useEffect, useRef } from 'react';\nimport { Position } from 'reactflow';\nimport { BaseNode } from './BaseNode';\nimport { useStore } from '../store';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst VAR_REGEX = /\\{\\{\\s*([a-zA-Z_$][a-zA-Z0-9_$]*)\\s*\\}\\}/g;\nexport const TextNode = ({\n  id,\n  data\n}) => {\n  _s();\n  const [currText, setCurrText] = useState((data === null || data === void 0 ? void 0 : data.text) || '');\n  const [variables, setVariables] = useState([]);\n  const textAreaRef = useRef(null);\n  const overlayRef = useRef(null);\n  const updateNodeField = useStore(s => s.updateNodeField);\n  useEffect(() => {\n    const matches = [...currText.matchAll(VAR_REGEX)].map(m => m[1]);\n    setVariables([...new Set(matches)]);\n    updateNodeField(id, 'text', currText);\n  }, [currText, id, updateNodeField]);\n\n  // Adjust height automatically\n  useEffect(() => {\n    const ta = textAreaRef.current;\n    if (ta) {\n      ta.style.height = 'auto';\n      ta.style.height = `${ta.scrollHeight}px`;\n    }\n  }, [currText]);\n  const renderOverlay = () => {\n    // We use a zero-width space to ensure trailing newlines are rendered\n    const textToProcess = currText.endsWith('\\n') ? currText + '\\u200B' : currText;\n    const parts = textToProcess.split(/(\\{\\{\\s*[a-zA-Z_$][a-zA-Z0-9_$]*\\s*\\}\\})/g);\n    return parts.map((part, i) => {\n      if (part.match(VAR_REGEX)) {\n        return /*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            background: '#e0e7ff',\n            color: '#4338ca',\n            borderRadius: '3px',\n            padding: '0 1px',\n            fontWeight: '600',\n            border: '1px solid #c7d2fe'\n          },\n          children: part\n        }, i, false, {\n          fileName: _jsxFileName,\n          lineNumber: 40,\n          columnNumber: 11\n        }, this);\n      }\n      return /*#__PURE__*/_jsxDEV(\"span\", {\n        children: part\n      }, i, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 14\n      }, this);\n    });\n  };\n  const sharedStyle = {\n    fontFamily: '\"Fira Code\", \"Courier New\", monospace',\n    fontSize: '13px',\n    lineHeight: '1.6',\n    padding: '12px',\n    margin: '0',\n    whiteSpace: 'pre-wrap',\n    wordBreak: 'break-word',\n    boxSizing: 'border-box',\n    width: '100%',\n    minHeight: '40px'\n  };\n  return /*#__PURE__*/_jsxDEV(BaseNode, {\n    id: id,\n    label: \"Text\",\n    handles: variables.map((v, i) => ({\n      type: 'target',\n      position: Position.Left,\n      id: `${id}-${v}`,\n      // Unique ID for stability\n      style: {\n        top: `${(i + 1) * (100 / (variables.length + 1))}%`\n      }\n    })),\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: 'relative',\n        minWidth: '240px',\n        border: '1px solid #d1d5db',\n        borderRadius: '8px',\n        background: '#ffffff',\n        overflow: 'hidden',\n        cursor: 'text'\n      },\n      onClick: () => {\n        var _textAreaRef$current;\n        return (_textAreaRef$current = textAreaRef.current) === null || _textAreaRef$current === void 0 ? void 0 : _textAreaRef$current.focus();\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        ref: overlayRef,\n        \"aria-hidden\": \"true\",\n        style: {\n          ...sharedStyle,\n          position: 'absolute',\n          inset: 0,\n          color: 'transparent',\n          // Text is invisible, only span backgrounds show\n          pointerEvents: 'none',\n          zIndex: 1\n        },\n        children: renderOverlay()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        ref: textAreaRef,\n        value: currText,\n        onChange: e => setCurrText(e.target.value),\n        spellCheck: false,\n        placeholder: \"Type {{variable}}...\",\n        style: {\n          ...sharedStyle,\n          position: 'relative',\n          display: 'block',\n          zIndex: 2,\n          background: 'transparent',\n          color: '#1f2937',\n          // This is the real text color\n          border: 'none',\n          outline: 'none',\n          resize: 'none',\n          caretColor: '#6366f1'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 73,\n    columnNumber: 5\n  }, this);\n};\n_s(TextNode, \"64/Ygu3vegLYFK+e+TQEA5z86JE=\", false, function () {\n  return [useStore];\n});\n_c = TextNode;\nvar _c;\n$RefreshReg$(_c, \"TextNode\");","map":{"version":3,"names":["useState","useEffect","useRef","Position","BaseNode","useStore","jsxDEV","_jsxDEV","VAR_REGEX","TextNode","id","data","_s","currText","setCurrText","text","variables","setVariables","textAreaRef","overlayRef","updateNodeField","s","matches","matchAll","map","m","Set","ta","current","style","height","scrollHeight","renderOverlay","textToProcess","endsWith","parts","split","part","i","match","background","color","borderRadius","padding","fontWeight","border","children","fileName","_jsxFileName","lineNumber","columnNumber","sharedStyle","fontFamily","fontSize","lineHeight","margin","whiteSpace","wordBreak","boxSizing","width","minHeight","label","handles","v","type","position","Left","top","length","minWidth","overflow","cursor","onClick","_textAreaRef$current","focus","ref","inset","pointerEvents","zIndex","value","onChange","e","target","spellCheck","placeholder","display","outline","resize","caretColor","_c","$RefreshReg$"],"sources":["/Users/maheshsamale/frontend_technical_assessment/frontend/src/nodes/textNode.js"],"sourcesContent":["// textNode.js refined\nimport { useState, useEffect, useRef } from 'react';\nimport { Position } from 'reactflow';\nimport { BaseNode } from './BaseNode';\nimport { useStore } from '../store';\n\nconst VAR_REGEX = /\\{\\{\\s*([a-zA-Z_$][a-zA-Z0-9_$]*)\\s*\\}\\}/g;\n\nexport const TextNode = ({ id, data }) => {\n  const [currText, setCurrText] = useState(data?.text || '');\n  const [variables, setVariables] = useState([]);\n\n  const textAreaRef = useRef(null);\n  const overlayRef = useRef(null);\n  const updateNodeField = useStore((s) => s.updateNodeField);\n\n  useEffect(() => {\n    const matches = [...currText.matchAll(VAR_REGEX)].map(m => m[1]);\n    setVariables([...new Set(matches)]);\n    updateNodeField(id, 'text', currText);\n  }, [currText, id, updateNodeField]);\n\n  // Adjust height automatically\n  useEffect(() => {\n    const ta = textAreaRef.current;\n    if (ta) {\n      ta.style.height = 'auto';\n      ta.style.height = `${ta.scrollHeight}px`;\n    }\n  }, [currText]);\n\n  const renderOverlay = () => {\n    // We use a zero-width space to ensure trailing newlines are rendered\n    const textToProcess = currText.endsWith('\\n') ? currText + '\\u200B' : currText;\n    const parts = textToProcess.split(/(\\{\\{\\s*[a-zA-Z_$][a-zA-Z0-9_$]*\\s*\\}\\})/g);\n\n    return parts.map((part, i) => {\n      if (part.match(VAR_REGEX)) {\n        return (\n          <span\n            key={i}\n            style={{\n              background: '#e0e7ff',\n              color: '#4338ca',\n              borderRadius: '3px',\n              padding: '0 1px',\n              fontWeight: '600',\n              border: '1px solid #c7d2fe'\n            }}\n          >\n            {part}\n          </span>\n        );\n      }\n      return <span key={i}>{part}</span>;\n    });\n  };\n\n  const sharedStyle = {\n    fontFamily: '\"Fira Code\", \"Courier New\", monospace',\n    fontSize: '13px',\n    lineHeight: '1.6',\n    padding: '12px',\n    margin: '0',\n    whiteSpace: 'pre-wrap',\n    wordBreak: 'break-word',\n    boxSizing: 'border-box',\n    width: '100%',\n    minHeight: '40px',\n  };\n\n  return (\n    <BaseNode\n      id={id}\n      label=\"Text\"\n      handles={variables.map((v, i) => ({\n        type: 'target',\n        position: Position.Left,\n        id: `${id}-${v}`, // Unique ID for stability\n        style: {\n          top: `${(i + 1) * (100 / (variables.length + 1))}%`,\n        },\n      }))}\n    >\n      <div\n        style={{\n          position: 'relative',\n          minWidth: '240px',\n          border: '1px solid #d1d5db',\n          borderRadius: '8px',\n          background: '#ffffff',\n          overflow: 'hidden',\n          cursor: 'text'\n        }}\n        onClick={() => textAreaRef.current?.focus()}\n      >\n        {/* HIGHLIGHT OVERLAY */}\n        <div\n          ref={overlayRef}\n          aria-hidden=\"true\"\n          style={{\n            ...sharedStyle,\n            position: 'absolute',\n            inset: 0,\n            color: 'transparent', // Text is invisible, only span backgrounds show\n            pointerEvents: 'none',\n            zIndex: 1\n          }}\n        >\n          {renderOverlay()}\n        </div>\n\n        {/* INTERACTIVE TEXTAREA */}\n        <textarea\n          ref={textAreaRef}\n          value={currText}\n          onChange={(e) => setCurrText(e.target.value)}\n          spellCheck={false}\n          placeholder=\"Type {{variable}}...\"\n          style={{\n            ...sharedStyle,\n            position: 'relative',\n            display: 'block',\n            zIndex: 2,\n            background: 'transparent',\n            color: '#1f2937', // This is the real text color\n            border: 'none',\n            outline: 'none',\n            resize: 'none',\n            caretColor: '#6366f1',\n          }}\n        />\n      </div>\n    </BaseNode>\n  );\n};"],"mappings":";;AAAA;AACA,SAASA,QAAQ,EAAEC,SAAS,EAAEC,MAAM,QAAQ,OAAO;AACnD,SAASC,QAAQ,QAAQ,WAAW;AACpC,SAASC,QAAQ,QAAQ,YAAY;AACrC,SAASC,QAAQ,QAAQ,UAAU;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEpC,MAAMC,SAAS,GAAG,2CAA2C;AAE7D,OAAO,MAAMC,QAAQ,GAAGA,CAAC;EAAEC,EAAE;EAAEC;AAAK,CAAC,KAAK;EAAAC,EAAA;EACxC,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGd,QAAQ,CAAC,CAAAW,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEI,IAAI,KAAI,EAAE,CAAC;EAC1D,MAAM,CAACC,SAAS,EAAEC,YAAY,CAAC,GAAGjB,QAAQ,CAAC,EAAE,CAAC;EAE9C,MAAMkB,WAAW,GAAGhB,MAAM,CAAC,IAAI,CAAC;EAChC,MAAMiB,UAAU,GAAGjB,MAAM,CAAC,IAAI,CAAC;EAC/B,MAAMkB,eAAe,GAAGf,QAAQ,CAAEgB,CAAC,IAAKA,CAAC,CAACD,eAAe,CAAC;EAE1DnB,SAAS,CAAC,MAAM;IACd,MAAMqB,OAAO,GAAG,CAAC,GAAGT,QAAQ,CAACU,QAAQ,CAACf,SAAS,CAAC,CAAC,CAACgB,GAAG,CAACC,CAAC,IAAIA,CAAC,CAAC,CAAC,CAAC,CAAC;IAChER,YAAY,CAAC,CAAC,GAAG,IAAIS,GAAG,CAACJ,OAAO,CAAC,CAAC,CAAC;IACnCF,eAAe,CAACV,EAAE,EAAE,MAAM,EAAEG,QAAQ,CAAC;EACvC,CAAC,EAAE,CAACA,QAAQ,EAAEH,EAAE,EAAEU,eAAe,CAAC,CAAC;;EAEnC;EACAnB,SAAS,CAAC,MAAM;IACd,MAAM0B,EAAE,GAAGT,WAAW,CAACU,OAAO;IAC9B,IAAID,EAAE,EAAE;MACNA,EAAE,CAACE,KAAK,CAACC,MAAM,GAAG,MAAM;MACxBH,EAAE,CAACE,KAAK,CAACC,MAAM,GAAG,GAAGH,EAAE,CAACI,YAAY,IAAI;IAC1C;EACF,CAAC,EAAE,CAAClB,QAAQ,CAAC,CAAC;EAEd,MAAMmB,aAAa,GAAGA,CAAA,KAAM;IAC1B;IACA,MAAMC,aAAa,GAAGpB,QAAQ,CAACqB,QAAQ,CAAC,IAAI,CAAC,GAAGrB,QAAQ,GAAG,QAAQ,GAAGA,QAAQ;IAC9E,MAAMsB,KAAK,GAAGF,aAAa,CAACG,KAAK,CAAC,2CAA2C,CAAC;IAE9E,OAAOD,KAAK,CAACX,GAAG,CAAC,CAACa,IAAI,EAAEC,CAAC,KAAK;MAC5B,IAAID,IAAI,CAACE,KAAK,CAAC/B,SAAS,CAAC,EAAE;QACzB,oBACED,OAAA;UAEEsB,KAAK,EAAE;YACLW,UAAU,EAAE,SAAS;YACrBC,KAAK,EAAE,SAAS;YAChBC,YAAY,EAAE,KAAK;YACnBC,OAAO,EAAE,OAAO;YAChBC,UAAU,EAAE,KAAK;YACjBC,MAAM,EAAE;UACV,CAAE;UAAAC,QAAA,EAEDT;QAAI,GAVAC,CAAC;UAAAS,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAWF,CAAC;MAEX;MACA,oBAAO3C,OAAA;QAAAuC,QAAA,EAAeT;MAAI,GAARC,CAAC;QAAAS,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAc,CAAC;IACpC,CAAC,CAAC;EACJ,CAAC;EAED,MAAMC,WAAW,GAAG;IAClBC,UAAU,EAAE,uCAAuC;IACnDC,QAAQ,EAAE,MAAM;IAChBC,UAAU,EAAE,KAAK;IACjBX,OAAO,EAAE,MAAM;IACfY,MAAM,EAAE,GAAG;IACXC,UAAU,EAAE,UAAU;IACtBC,SAAS,EAAE,YAAY;IACvBC,SAAS,EAAE,YAAY;IACvBC,KAAK,EAAE,MAAM;IACbC,SAAS,EAAE;EACb,CAAC;EAED,oBACErD,OAAA,CAACH,QAAQ;IACPM,EAAE,EAAEA,EAAG;IACPmD,KAAK,EAAC,MAAM;IACZC,OAAO,EAAE9C,SAAS,CAACQ,GAAG,CAAC,CAACuC,CAAC,EAAEzB,CAAC,MAAM;MAChC0B,IAAI,EAAE,QAAQ;MACdC,QAAQ,EAAE9D,QAAQ,CAAC+D,IAAI;MACvBxD,EAAE,EAAE,GAAGA,EAAE,IAAIqD,CAAC,EAAE;MAAE;MAClBlC,KAAK,EAAE;QACLsC,GAAG,EAAE,GAAG,CAAC7B,CAAC,GAAG,CAAC,KAAK,GAAG,IAAItB,SAAS,CAACoD,MAAM,GAAG,CAAC,CAAC,CAAC;MAClD;IACF,CAAC,CAAC,CAAE;IAAAtB,QAAA,eAEJvC,OAAA;MACEsB,KAAK,EAAE;QACLoC,QAAQ,EAAE,UAAU;QACpBI,QAAQ,EAAE,OAAO;QACjBxB,MAAM,EAAE,mBAAmB;QAC3BH,YAAY,EAAE,KAAK;QACnBF,UAAU,EAAE,SAAS;QACrB8B,QAAQ,EAAE,QAAQ;QAClBC,MAAM,EAAE;MACV,CAAE;MACFC,OAAO,EAAEA,CAAA;QAAA,IAAAC,oBAAA;QAAA,QAAAA,oBAAA,GAAMvD,WAAW,CAACU,OAAO,cAAA6C,oBAAA,uBAAnBA,oBAAA,CAAqBC,KAAK,CAAC,CAAC;MAAA,CAAC;MAAA5B,QAAA,gBAG5CvC,OAAA;QACEoE,GAAG,EAAExD,UAAW;QAChB,eAAY,MAAM;QAClBU,KAAK,EAAE;UACL,GAAGsB,WAAW;UACdc,QAAQ,EAAE,UAAU;UACpBW,KAAK,EAAE,CAAC;UACRnC,KAAK,EAAE,aAAa;UAAE;UACtBoC,aAAa,EAAE,MAAM;UACrBC,MAAM,EAAE;QACV,CAAE;QAAAhC,QAAA,EAEDd,aAAa,CAAC;MAAC;QAAAe,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACb,CAAC,eAGN3C,OAAA;QACEoE,GAAG,EAAEzD,WAAY;QACjB6D,KAAK,EAAElE,QAAS;QAChBmE,QAAQ,EAAGC,CAAC,IAAKnE,WAAW,CAACmE,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE;QAC7CI,UAAU,EAAE,KAAM;QAClBC,WAAW,EAAC,sBAAsB;QAClCvD,KAAK,EAAE;UACL,GAAGsB,WAAW;UACdc,QAAQ,EAAE,UAAU;UACpBoB,OAAO,EAAE,OAAO;UAChBP,MAAM,EAAE,CAAC;UACTtC,UAAU,EAAE,aAAa;UACzBC,KAAK,EAAE,SAAS;UAAE;UAClBI,MAAM,EAAE,MAAM;UACdyC,OAAO,EAAE,MAAM;UACfC,MAAM,EAAE,MAAM;UACdC,UAAU,EAAE;QACd;MAAE;QAAAzC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACC;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACE,CAAC;AAEf,CAAC;AAACtC,EAAA,CA/HWH,QAAQ;EAAA,QAMKJ,QAAQ;AAAA;AAAAoF,EAAA,GANrBhF,QAAQ;AAAA,IAAAgF,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}