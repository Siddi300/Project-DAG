{"ast":null,"code":"var _jsxFileName = \"/Users/maheshsamale/frontend_technical_assessment/frontend/src/nodes/textNode.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect, useRef } from 'react';\nimport { Position } from 'reactflow';\nimport { BaseNode } from './BaseNode';\nimport { useStore } from '../store'; // Import your store to sync data\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const TextNode = ({\n  id,\n  data\n}) => {\n  _s();\n  const [currText, setCurrText] = useState((data === null || data === void 0 ? void 0 : data.text) || '{{input}}');\n  const [variables, setVariables] = useState([]);\n  const textAreaRef = useRef(null);\n  const updateNodeField = useStore(s => s.updateNodeField);\n  useEffect(() => {\n    // Regex to find variables like {{ name }}\n    const regex = /\\{\\{\\s*([a-zA-Z_$][a-zA-Z0-9_$]*)\\s*\\}\\}/g;\n    const matches = [...currText.matchAll(regex)].map(match => match[1]);\n    setVariables([...new Set(matches)]);\n\n    // Sync with global store for backend submission\n    updateNodeField(id, 'text', currText);\n\n    // Auto-resize\n    if (textAreaRef.current) {\n      textAreaRef.current.style.height = 'auto';\n      textAreaRef.current.style.height = `${textAreaRef.current.scrollHeight}px`;\n    }\n  }, [currText, id, updateNodeField]);\n\n  // Create handles\n  const handles = [{\n    type: 'source',\n    position: Position.Right,\n    id: 'output'\n  }, ...variables.map((varName, index) => ({\n    type: 'target',\n    position: Position.Left,\n    id: varName,\n    style: {\n      top: `${(index + 1) * (100 / (variables.length + 1))}%`\n    }\n  }))];\n\n  // Helper to highlight variables in the display layer\n  const getHighlightedText = () => {\n    const parts = currText.split(/(\\{\\{\\s*[a-zA-Z_$][a-zA-Z0-9_$]*\\s*\\}\\})/g);\n    return parts.map((part, i) => {\n      const isVariable = /\\{\\{\\s*[a-zA-Z_$][a-zA-Z0-9_$]*\\s*\\}\\}/.test(part);\n      return isVariable ? /*#__PURE__*/_jsxDEV(\"span\", {\n        style: {\n          color: '#4A90E2',\n          fontWeight: 'bold',\n          backgroundColor: '#eef6ff',\n          borderRadius: '2px'\n        },\n        children: part\n      }, i, false, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 9\n      }, this) : part;\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(BaseNode, {\n    id: id,\n    label: \"Text\",\n    handles: handles,\n    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n      style: {\n        fontSize: '11px',\n        color: '#666'\n      },\n      children: \"Content:\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: 'relative',\n        minHeight: '40px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          position: 'absolute',\n          top: 0,\n          left: 0,\n          width: '100%',\n          height: '100%',\n          padding: '5px',\n          fontSize: '13px',\n          whiteSpace: 'pre-wrap',\n          wordWrap: 'break-word',\n          pointerEvents: 'none',\n          // Let clicks pass through to the textarea\n          color: 'transparent',\n          // Hide the text, only show the <span> background/color\n          border: '1px solid transparent'\n        },\n        children: getHighlightedText()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        ref: textAreaRef,\n        value: currText,\n        onChange: e => setCurrText(e.target.value),\n        style: {\n          width: '100%',\n          background: 'transparent',\n          position: 'relative',\n          zIndex: 1,\n          border: '1px solid #ccc',\n          borderRadius: '4px',\n          padding: '4px',\n          fontSize: '13px',\n          resize: 'none',\n          overflow: 'hidden',\n          color: '#333',\n          // Use a semi-transparent or specific color to align with highlights\n          caretColor: 'black'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 5\n  }, this);\n};\n_s(TextNode, \"qEU2TTK0b2X0yPMClxLwa15Cjeo=\", false, function () {\n  return [useStore];\n});\n_c = TextNode;\nvar _c;\n$RefreshReg$(_c, \"TextNode\");","map":{"version":3,"names":["useState","useEffect","useRef","Position","BaseNode","useStore","jsxDEV","_jsxDEV","TextNode","id","data","_s","currText","setCurrText","text","variables","setVariables","textAreaRef","updateNodeField","s","regex","matches","matchAll","map","match","Set","current","style","height","scrollHeight","handles","type","position","Right","varName","index","Left","top","length","getHighlightedText","parts","split","part","i","isVariable","test","color","fontWeight","backgroundColor","borderRadius","children","fileName","_jsxFileName","lineNumber","columnNumber","label","fontSize","minHeight","left","width","padding","whiteSpace","wordWrap","pointerEvents","border","ref","value","onChange","e","target","background","zIndex","resize","overflow","caretColor","_c","$RefreshReg$"],"sources":["/Users/maheshsamale/frontend_technical_assessment/frontend/src/nodes/textNode.js"],"sourcesContent":["import { useState, useEffect, useRef } from 'react';\nimport { Position } from 'reactflow';\nimport { BaseNode } from './BaseNode';\nimport { useStore } from '../store'; // Import your store to sync data\n\nexport const TextNode = ({ id, data }) => {\n  const [currText, setCurrText] = useState(data?.text || '{{input}}');\n  const [variables, setVariables] = useState([]);\n  const textAreaRef = useRef(null);\n  const updateNodeField = useStore((s) => s.updateNodeField);\n\n  useEffect(() => {\n    // Regex to find variables like {{ name }}\n    const regex = /\\{\\{\\s*([a-zA-Z_$][a-zA-Z0-9_$]*)\\s*\\}\\}/g;\n    const matches = [...currText.matchAll(regex)].map(match => match[1]);\n    setVariables([...new Set(matches)]);\n\n    // Sync with global store for backend submission\n    updateNodeField(id, 'text', currText);\n\n    // Auto-resize\n    if (textAreaRef.current) {\n      textAreaRef.current.style.height = 'auto';\n      textAreaRef.current.style.height = `${textAreaRef.current.scrollHeight}px`;\n    }\n  }, [currText, id, updateNodeField]);\n\n  // Create handles\n  const handles = [\n    { type: 'source', position: Position.Right, id: 'output' },\n    ...variables.map((varName, index) => ({\n      type: 'target',\n      position: Position.Left,\n      id: varName,\n      style: { top: `${(index + 1) * (100 / (variables.length + 1))}%` }\n    }))\n  ];\n\n  // Helper to highlight variables in the display layer\n  const getHighlightedText = () => {\n    const parts = currText.split(/(\\{\\{\\s*[a-zA-Z_$][a-zA-Z0-9_$]*\\s*\\}\\})/g);\n    return parts.map((part, i) => {\n      const isVariable = /\\{\\{\\s*[a-zA-Z_$][a-zA-Z0-9_$]*\\s*\\}\\}/.test(part);\n      return isVariable ? (\n        <span key={i} style={{ color: '#4A90E2', fontWeight: 'bold', backgroundColor: '#eef6ff', borderRadius: '2px' }}>\n          {part}\n        </span>\n      ) : part;\n    });\n  };\n\n  return (\n    <BaseNode id={id} label=\"Text\" handles={handles}>\n      <label style={{ fontSize: '11px', color: '#666' }}>Content:</label>\n      <div style={{ position: 'relative', minHeight: '40px' }}>\n        {/* Layer 1: Highlighting Display */}\n        <div style={{\n          position: 'absolute',\n          top: 0,\n          left: 0,\n          width: '100%',\n          height: '100%',\n          padding: '5px',\n          fontSize: '13px',\n          whiteSpace: 'pre-wrap',\n          wordWrap: 'break-word',\n          pointerEvents: 'none', // Let clicks pass through to the textarea\n          color: 'transparent', // Hide the text, only show the <span> background/color\n          border: '1px solid transparent'\n        }}>\n          {getHighlightedText()}\n        </div>\n\n        {/* Layer 2: Actual Input */}\n        <textarea \n          ref={textAreaRef}\n          value={currText} \n          onChange={(e) => setCurrText(e.target.value)}\n          style={{ \n            width: '100%', \n            background: 'transparent',\n            position: 'relative',\n            zIndex: 1,\n            border: '1px solid #ccc', \n            borderRadius: '4px',\n            padding: '4px',\n            fontSize: '13px',\n            resize: 'none',\n            overflow: 'hidden',\n            color: '#333', // Use a semi-transparent or specific color to align with highlights\n            caretColor: 'black'\n          }} \n        />\n      </div>\n    </BaseNode>\n  );\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}