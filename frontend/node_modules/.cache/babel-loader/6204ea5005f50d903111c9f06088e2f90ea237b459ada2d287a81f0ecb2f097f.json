{"ast":null,"code":"var _jsxFileName = \"/Users/maheshsamale/frontend_technical_assessment/frontend/src/nodes/textNode.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect, useRef } from 'react';\nimport { Position } from 'reactflow';\nimport { BaseNode } from './BaseNode';\nimport { useStore } from '../store';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const TextNode = ({\n  id,\n  data\n}) => {\n  _s();\n  const [variables, setVariables] = useState([]);\n  const editableRef = useRef(null);\n  const updateNodeField = useStore(s => s.updateNodeField);\n\n  // Sync variables and store on every change\n  const handleInput = () => {\n    const text = editableRef.current.innerText;\n    const regex = /\\{\\{\\s*([a-zA-Z_$][a-zA-Z0-9_$]*)\\s*\\}\\}/g;\n    const matches = [...text.matchAll(regex)].map(match => match[1]);\n    setVariables([...new Set(matches)]);\n    updateNodeField(id, 'text', text);\n  };\n\n  // We use this to prevent the cursor from jumping to the start \n  // by only setting initial content once.\n  useEffect(() => {\n    if (editableRef.current && !editableRef.current.innerText) {\n      editableRef.current.innerText = (data === null || data === void 0 ? void 0 : data.text) || 'type {{input}} here';\n      handleInput();\n    }\n  }, []);\n  return /*#__PURE__*/_jsxDEV(BaseNode, {\n    id: id,\n    label: \"Text\",\n    handles: variables.map((v, i) => ({\n      type: 'target',\n      position: Position.Left,\n      id: v,\n      style: {\n        top: `${(i + 1) * (100 / (variables.length + 1))}%`\n      }\n    })),\n    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n      style: {\n        display: 'block',\n        fontSize: '10px',\n        fontWeight: 'bold',\n        color: '#64748b',\n        marginBottom: '8px'\n      },\n      children: \"CONTENT\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        padding: '0 8px'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: editableRef,\n        contentEditable: true,\n        onInput: handleInput,\n        suppressContentEditableWarning: true,\n        className: \"nodrag\" // Prevents ReactFlow from dragging the node while you type\n        ,\n        style: {\n          minHeight: '80px',\n          width: '230px',\n          backgroundColor: '#f8fafc',\n          border: '1.5px solid #e2e8f0',\n          borderRadius: '8px',\n          padding: '12px',\n          fontSize: '14px',\n          lineHeight: '1.6',\n          fontFamily: 'monospace',\n          outline: 'none',\n          color: '#334155',\n          wordBreak: 'break-word',\n          whiteSpace: 'pre-wrap',\n          cursor: 'text'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"style\", {\n      children: `\n        /* This CSS targets the {{variable}} text dynamically */\n        [contenteditable] span.pill {\n          background-color: #eef2ff;\n          border: 1px solid #c7d2fe;\n          border-radius: 4px;\n          padding: 0 4px;\n          color: #4338ca;\n          font-weight: 600;\n          display: inline-block;\n        }\n      `\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 31,\n    columnNumber: 5\n  }, this);\n};\n_s(TextNode, \"qlKTZzfdCfbf2ir6Z/GaRW00fMw=\", false, function () {\n  return [useStore];\n});\n_c = TextNode;\nvar _c;\n$RefreshReg$(_c, \"TextNode\");","map":{"version":3,"names":["useState","useEffect","useRef","Position","BaseNode","useStore","jsxDEV","_jsxDEV","TextNode","id","data","_s","variables","setVariables","editableRef","updateNodeField","s","handleInput","text","current","innerText","regex","matches","matchAll","map","match","Set","label","handles","v","i","type","position","Left","style","top","length","children","display","fontSize","fontWeight","color","marginBottom","fileName","_jsxFileName","lineNumber","columnNumber","padding","ref","contentEditable","onInput","suppressContentEditableWarning","className","minHeight","width","backgroundColor","border","borderRadius","lineHeight","fontFamily","outline","wordBreak","whiteSpace","cursor","_c","$RefreshReg$"],"sources":["/Users/maheshsamale/frontend_technical_assessment/frontend/src/nodes/textNode.js"],"sourcesContent":["import { useState, useEffect, useRef } from 'react';\nimport { Position } from 'reactflow';\nimport { BaseNode } from './BaseNode';\nimport { useStore } from '../store';\n\nexport const TextNode = ({ id, data }) => {\n  const [variables, setVariables] = useState([]);\n  const editableRef = useRef(null);\n  const updateNodeField = useStore((s) => s.updateNodeField);\n\n  // Sync variables and store on every change\n  const handleInput = () => {\n    const text = editableRef.current.innerText;\n    const regex = /\\{\\{\\s*([a-zA-Z_$][a-zA-Z0-9_$]*)\\s*\\}\\}/g;\n    const matches = [...text.matchAll(regex)].map(match => match[1]);\n    \n    setVariables([...new Set(matches)]);\n    updateNodeField(id, 'text', text);\n  };\n\n  // We use this to prevent the cursor from jumping to the start \n  // by only setting initial content once.\n  useEffect(() => {\n    if (editableRef.current && !editableRef.current.innerText) {\n        editableRef.current.innerText = data?.text || 'type {{input}} here';\n        handleInput();\n    }\n  }, []);\n\n  return (\n    <BaseNode id={id} label=\"Text\" handles={variables.map((v, i) => ({\n      type: 'target', position: Position.Left, id: v,\n      style: { top: `${(i + 1) * (100 / (variables.length + 1))}%` }\n    }))}>\n      <label style={{ display: 'block', fontSize: '10px', fontWeight: 'bold', color: '#64748b', marginBottom: '8px' }}>\n        CONTENT\n      </label>\n\n      <div style={{ padding: '0 8px' }}>\n        <div \n          ref={editableRef}\n          contentEditable\n          onInput={handleInput}\n          suppressContentEditableWarning={true}\n          className=\"nodrag\" // Prevents ReactFlow from dragging the node while you type\n          style={{\n            minHeight: '80px',\n            width: '230px',\n            backgroundColor: '#f8fafc',\n            border: '1.5px solid #e2e8f0',\n            borderRadius: '8px',\n            padding: '12px',\n            fontSize: '14px',\n            lineHeight: '1.6',\n            fontFamily: 'monospace',\n            outline: 'none',\n            color: '#334155',\n            wordBreak: 'break-word',\n            whiteSpace: 'pre-wrap',\n            cursor: 'text'\n          }}\n        />\n      </div>\n\n      <style>{`\n        /* This CSS targets the {{variable}} text dynamically */\n        [contenteditable] span.pill {\n          background-color: #eef2ff;\n          border: 1px solid #c7d2fe;\n          border-radius: 4px;\n          padding: 0 4px;\n          color: #4338ca;\n          font-weight: 600;\n          display: inline-block;\n        }\n      `}</style>\n    </BaseNode>\n  );\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}