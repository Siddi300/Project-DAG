{"ast":null,"code":"var _jsxFileName = \"/Users/maheshsamale/frontend_technical_assessment/frontend/src/nodes/textNode.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect, useRef } from 'react';\nimport { Position } from 'reactflow';\nimport { BaseNode } from './BaseNode';\nimport { useStore } from '../store';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const TextNode = ({\n  id,\n  data\n}) => {\n  _s();\n  const [currText, setCurrText] = useState((data === null || data === void 0 ? void 0 : data.text) || '');\n  const [variables, setVariables] = useState([]);\n  const textAreaRef = useRef(null);\n  const containerRef = useRef(null);\n  const updateNodeField = useStore(s => s.updateNodeField);\n\n  /**\n   * Detect {{variable}}\n   */\n  useEffect(() => {\n    const regex = /\\{\\{\\s*([a-zA-Z_$][a-zA-Z0-9_$]*)\\s*\\}\\}/g;\n    const matches = [...currText.matchAll(regex)].map(m => m[1]);\n    const unique = [...new Set(matches)];\n    setVariables(unique);\n    updateNodeField(id, 'text', currText);\n  }, [currText, id, updateNodeField]);\n\n  /**\n   * Auto resize\n   */\n  useEffect(() => {\n    if (!textAreaRef.current || !containerRef.current) return;\n    textAreaRef.current.style.height = 'auto';\n    textAreaRef.current.style.height = textAreaRef.current.scrollHeight + 'px';\n    const length = Math.max(currText.length, 20);\n    const width = Math.min(420, 180 + length * 4);\n    containerRef.current.style.width = `${width}px`;\n  }, [currText]);\n\n  /**\n   * Highlight preview renderer (NOT overlay)\n   */\n  const renderPreview = () => {\n    const parts = currText.split(/(\\{\\{\\s*[a-zA-Z_$][a-zA-Z0-9_$]*\\s*\\}\\})/g);\n    return parts.map((part, i) => {\n      const isVar = /^\\{\\{\\s*[a-zA-Z_$][a-zA-Z0-9_$]*\\s*\\}\\}$/.test(part);\n      if (isVar) {\n        const name = part.replace(/[{}]/g, '').trim();\n        return /*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            background: '#e0e7ff',\n            color: '#3730a3',\n            padding: '2px 5px',\n            borderRadius: '4px',\n            fontWeight: 600\n          },\n          children: name\n        }, i, false, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 11\n        }, this);\n      }\n      return /*#__PURE__*/_jsxDEV(\"span\", {\n        children: part\n      }, i, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 14\n      }, this);\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(BaseNode, {\n    id: id,\n    label: \"Text\",\n    handles: variables.map((v, i) => ({\n      type: 'target',\n      position: Position.Left,\n      id: `${id}-${v}`,\n      style: {\n        top: `${(i + 1) * (100 / (variables.length + 1))}%`\n      }\n    })),\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: containerRef,\n      style: {\n        border: '1px solid #e5e7eb',\n        borderRadius: '8px',\n        padding: '8px',\n        background: '#f9fafb',\n        minWidth: '180px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n        ref: textAreaRef,\n        value: currText,\n        onChange: e => setCurrText(e.target.value),\n        placeholder: \"Type {{variable}}...\",\n        style: {\n          width: '100%',\n          resize: 'none',\n          border: 'none',\n          outline: 'none',\n          fontFamily: 'monospace',\n          fontSize: '14px',\n          lineHeight: '22px',\n          background: 'transparent'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }, this), currText && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: '8px',\n          fontFamily: 'monospace',\n          fontSize: '13px',\n          background: '#f1f5f9',\n          padding: '6px',\n          borderRadius: '4px'\n        },\n        children: [\"Preview: \", renderPreview()]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 5\n  }, this);\n};\n_s(TextNode, \"xMlhs3TZN9JBFZVQ1A+SRHc6cEg=\", false, function () {\n  return [useStore];\n});\n_c = TextNode;\nvar _c;\n$RefreshReg$(_c, \"TextNode\");","map":{"version":3,"names":["useState","useEffect","useRef","Position","BaseNode","useStore","jsxDEV","_jsxDEV","TextNode","id","data","_s","currText","setCurrText","text","variables","setVariables","textAreaRef","containerRef","updateNodeField","s","regex","matches","matchAll","map","m","unique","Set","current","style","height","scrollHeight","length","Math","max","width","min","renderPreview","parts","split","part","i","isVar","test","name","replace","trim","background","color","padding","borderRadius","fontWeight","children","fileName","_jsxFileName","lineNumber","columnNumber","label","handles","v","type","position","Left","top","ref","border","minWidth","value","onChange","e","target","placeholder","resize","outline","fontFamily","fontSize","lineHeight","marginTop","_c","$RefreshReg$"],"sources":["/Users/maheshsamale/frontend_technical_assessment/frontend/src/nodes/textNode.js"],"sourcesContent":["import { useState, useEffect, useRef } from 'react';\nimport { Position } from 'reactflow';\nimport { BaseNode } from './BaseNode';\nimport { useStore } from '../store';\n\nexport const TextNode = ({ id, data }) => {\n  const [currText, setCurrText] = useState(data?.text || '');\n  const [variables, setVariables] = useState([]);\n\n  const textAreaRef = useRef(null);\n  const containerRef = useRef(null);\n\n  const updateNodeField = useStore((s) => s.updateNodeField);\n\n  /**\n   * Detect {{variable}}\n   */\n  useEffect(() => {\n    const regex = /\\{\\{\\s*([a-zA-Z_$][a-zA-Z0-9_$]*)\\s*\\}\\}/g;\n    const matches = [...currText.matchAll(regex)].map(m => m[1]);\n    const unique = [...new Set(matches)];\n    setVariables(unique);\n    updateNodeField(id, 'text', currText);\n  }, [currText, id, updateNodeField]);\n\n  /**\n   * Auto resize\n   */\n  useEffect(() => {\n    if (!textAreaRef.current || !containerRef.current) return;\n\n    textAreaRef.current.style.height = 'auto';\n    textAreaRef.current.style.height =\n      textAreaRef.current.scrollHeight + 'px';\n\n    const length = Math.max(currText.length, 20);\n    const width = Math.min(420, 180 + length * 4);\n    containerRef.current.style.width = `${width}px`;\n  }, [currText]);\n\n  /**\n   * Highlight preview renderer (NOT overlay)\n   */\n  const renderPreview = () => {\n    const parts = currText.split(\n      /(\\{\\{\\s*[a-zA-Z_$][a-zA-Z0-9_$]*\\s*\\}\\})/g\n    );\n\n    return parts.map((part, i) => {\n      const isVar = /^\\{\\{\\s*[a-zA-Z_$][a-zA-Z0-9_$]*\\s*\\}\\}$/.test(part);\n\n      if (isVar) {\n        const name = part.replace(/[{}]/g, '').trim();\n        return (\n          <span\n            key={i}\n            style={{\n              background: '#e0e7ff',\n              color: '#3730a3',\n              padding: '2px 5px',\n              borderRadius: '4px',\n              fontWeight: 600,\n            }}\n          >\n            {name}\n          </span>\n        );\n      }\n\n      return <span key={i}>{part}</span>;\n    });\n  };\n\n  return (\n    <BaseNode\n      id={id}\n      label=\"Text\"\n      handles={variables.map((v, i) => ({\n        type: 'target',\n        position: Position.Left,\n        id: `${id}-${v}`,\n        style: {\n          top: `${(i + 1) * (100 / (variables.length + 1))}%`,\n        },\n      }))}\n    >\n      <div\n        ref={containerRef}\n        style={{\n          border: '1px solid #e5e7eb',\n          borderRadius: '8px',\n          padding: '8px',\n          background: '#f9fafb',\n          minWidth: '180px',\n        }}\n      >\n        {/* REAL INPUT */}\n        <textarea\n          ref={textAreaRef}\n          value={currText}\n          onChange={(e) => setCurrText(e.target.value)}\n          placeholder=\"Type {{variable}}...\"\n          style={{\n            width: '100%',\n            resize: 'none',\n            border: 'none',\n            outline: 'none',\n            fontFamily: 'monospace',\n            fontSize: '14px',\n            lineHeight: '22px',\n            background: 'transparent',\n          }}\n        />\n\n        {/* PREVIEW */}\n        {currText && (\n          <div\n            style={{\n              marginTop: '8px',\n              fontFamily: 'monospace',\n              fontSize: '13px',\n              background: '#f1f5f9',\n              padding: '6px',\n              borderRadius: '4px',\n            }}\n          >\n            Preview: {renderPreview()}\n          </div>\n        )}\n      </div>\n    </BaseNode>\n  );\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}