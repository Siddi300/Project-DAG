{"ast":null,"code":"import { create } from \"zustand\";\nimport { addEdge, applyNodeChanges, applyEdgeChanges, MarkerType } from \"reactflow\";\nexport const useStore = create((set, get) => ({\n  nodes: [],\n  edges: [],\n  nodeIDs: {},\n  // ------------------------\n  // Generate Node ID\n  // ------------------------\n  getNodeID: type => {\n    const newIDs = {\n      ...get().nodeIDs\n    };\n    if (!newIDs[type]) {\n      newIDs[type] = 0;\n    }\n    newIDs[type] += 1;\n    set({\n      nodeIDs: newIDs\n    });\n    return `${type}-${newIDs[type]}`;\n  },\n  // ------------------------\n  // Add Node\n  // ------------------------\n  addNode: node => {\n    set({\n      nodes: [...get().nodes, node]\n    });\n  },\n  // ------------------------\n  // Node Changes (delete handled here)\n  // ------------------------\n  onNodesChange: changes => {\n    set(state => {\n      const updatedNodes = applyNodeChanges(changes, state.nodes);\n\n      // Find deleted node ids\n      const deletedIds = changes.filter(c => c.type === \"remove\").map(c => c.id);\n\n      // Remove edges connected to deleted nodes\n      const filteredEdges = state.edges.filter(e => !deletedIds.includes(e.source) && !deletedIds.includes(e.target));\n      return {\n        nodes: updatedNodes,\n        edges: filteredEdges\n      };\n    });\n  },\n  // ------------------------\n  // Edge Changes\n  // ------------------------\n  onEdgesChange: changes => {\n    set({\n      edges: applyEdgeChanges(changes, get().edges)\n    });\n  },\n  // ------------------------\n  // Connect Nodes\n  // ------------------------\n  onConnect: connection => {\n    set({\n      edges: addEdge({\n        ...connection,\n        type: \"smoothstep\",\n        animated: true,\n        markerEnd: {\n          type: MarkerType.Arrow,\n          height: \"20px\",\n          width: \"20px\"\n        }\n      }, get().edges)\n    });\n  },\n  // ------------------------\n  // Update Node Field\n  // ------------------------\n  updateNodeField: (nodeId, fieldName, fieldValue) => {\n    set({\n      nodes: get().nodes.map(node => {\n        if (node.id === nodeId) {\n          return {\n            ...node,\n            data: {\n              ...node.data,\n              [fieldName]: fieldValue\n            }\n          };\n        }\n        return node;\n      })\n    });\n  }\n}));","map":{"version":3,"names":["create","addEdge","applyNodeChanges","applyEdgeChanges","MarkerType","useStore","set","get","nodes","edges","nodeIDs","getNodeID","type","newIDs","addNode","node","onNodesChange","changes","state","updatedNodes","deletedIds","filter","c","map","id","filteredEdges","e","includes","source","target","onEdgesChange","onConnect","connection","animated","markerEnd","Arrow","height","width","updateNodeField","nodeId","fieldName","fieldValue","data"],"sources":["/Users/maheshsamale/frontend_technical_assessment/frontend/src/store.js"],"sourcesContent":["import { create } from \"zustand\";\nimport {\n  addEdge,\n  applyNodeChanges,\n  applyEdgeChanges,\n  MarkerType,\n} from \"reactflow\";\n\nexport const useStore = create((set, get) => ({\n  nodes: [],\n  edges: [],\n  nodeIDs: {},\n\n  // ------------------------\n  // Generate Node ID\n  // ------------------------\n  getNodeID: (type) => {\n    const newIDs = { ...get().nodeIDs };\n\n    if (!newIDs[type]) {\n      newIDs[type] = 0;\n    }\n\n    newIDs[type] += 1;\n    set({ nodeIDs: newIDs });\n\n    return `${type}-${newIDs[type]}`;\n  },\n\n  // ------------------------\n  // Add Node\n  // ------------------------\n  addNode: (node) => {\n    set({\n      nodes: [...get().nodes, node],\n    });\n  },\n\n  // ------------------------\n  // Node Changes (delete handled here)\n  // ------------------------\n  onNodesChange: (changes) => {\n    set((state) => {\n      const updatedNodes = applyNodeChanges(changes, state.nodes);\n\n      // Find deleted node ids\n      const deletedIds = changes\n        .filter((c) => c.type === \"remove\")\n        .map((c) => c.id);\n\n      // Remove edges connected to deleted nodes\n      const filteredEdges = state.edges.filter(\n        (e) =>\n          !deletedIds.includes(e.source) &&\n          !deletedIds.includes(e.target)\n      );\n\n      return {\n        nodes: updatedNodes,\n        edges: filteredEdges,\n      };\n    });\n  },\n\n  // ------------------------\n  // Edge Changes\n  // ------------------------\n  onEdgesChange: (changes) => {\n    set({\n      edges: applyEdgeChanges(changes, get().edges),\n    });\n  },\n\n  // ------------------------\n  // Connect Nodes\n  // ------------------------\n  onConnect: (connection) => {\n    set({\n      edges: addEdge(\n        {\n          ...connection,\n          type: \"smoothstep\",\n          animated: true,\n          markerEnd: {\n            type: MarkerType.Arrow,\n            height: \"20px\",\n            width: \"20px\",\n          },\n        },\n        get().edges\n      ),\n    });\n  },\n\n  // ------------------------\n  // Update Node Field\n  // ------------------------\n  updateNodeField: (nodeId, fieldName, fieldValue) => {\n    set({\n      nodes: get().nodes.map((node) => {\n        if (node.id === nodeId) {\n          return {\n            ...node,\n            data: {\n              ...node.data,\n              [fieldName]: fieldValue,\n            },\n          };\n        }\n        return node;\n      }),\n    });\n  },\n}));\n"],"mappings":"AAAA,SAASA,MAAM,QAAQ,SAAS;AAChC,SACEC,OAAO,EACPC,gBAAgB,EAChBC,gBAAgB,EAChBC,UAAU,QACL,WAAW;AAElB,OAAO,MAAMC,QAAQ,GAAGL,MAAM,CAAC,CAACM,GAAG,EAAEC,GAAG,MAAM;EAC5CC,KAAK,EAAE,EAAE;EACTC,KAAK,EAAE,EAAE;EACTC,OAAO,EAAE,CAAC,CAAC;EAEX;EACA;EACA;EACAC,SAAS,EAAGC,IAAI,IAAK;IACnB,MAAMC,MAAM,GAAG;MAAE,GAAGN,GAAG,CAAC,CAAC,CAACG;IAAQ,CAAC;IAEnC,IAAI,CAACG,MAAM,CAACD,IAAI,CAAC,EAAE;MACjBC,MAAM,CAACD,IAAI,CAAC,GAAG,CAAC;IAClB;IAEAC,MAAM,CAACD,IAAI,CAAC,IAAI,CAAC;IACjBN,GAAG,CAAC;MAAEI,OAAO,EAAEG;IAAO,CAAC,CAAC;IAExB,OAAO,GAAGD,IAAI,IAAIC,MAAM,CAACD,IAAI,CAAC,EAAE;EAClC,CAAC;EAED;EACA;EACA;EACAE,OAAO,EAAGC,IAAI,IAAK;IACjBT,GAAG,CAAC;MACFE,KAAK,EAAE,CAAC,GAAGD,GAAG,CAAC,CAAC,CAACC,KAAK,EAAEO,IAAI;IAC9B,CAAC,CAAC;EACJ,CAAC;EAED;EACA;EACA;EACAC,aAAa,EAAGC,OAAO,IAAK;IAC1BX,GAAG,CAAEY,KAAK,IAAK;MACb,MAAMC,YAAY,GAAGjB,gBAAgB,CAACe,OAAO,EAAEC,KAAK,CAACV,KAAK,CAAC;;MAE3D;MACA,MAAMY,UAAU,GAAGH,OAAO,CACvBI,MAAM,CAAEC,CAAC,IAAKA,CAAC,CAACV,IAAI,KAAK,QAAQ,CAAC,CAClCW,GAAG,CAAED,CAAC,IAAKA,CAAC,CAACE,EAAE,CAAC;;MAEnB;MACA,MAAMC,aAAa,GAAGP,KAAK,CAACT,KAAK,CAACY,MAAM,CACrCK,CAAC,IACA,CAACN,UAAU,CAACO,QAAQ,CAACD,CAAC,CAACE,MAAM,CAAC,IAC9B,CAACR,UAAU,CAACO,QAAQ,CAACD,CAAC,CAACG,MAAM,CACjC,CAAC;MAED,OAAO;QACLrB,KAAK,EAAEW,YAAY;QACnBV,KAAK,EAAEgB;MACT,CAAC;IACH,CAAC,CAAC;EACJ,CAAC;EAED;EACA;EACA;EACAK,aAAa,EAAGb,OAAO,IAAK;IAC1BX,GAAG,CAAC;MACFG,KAAK,EAAEN,gBAAgB,CAACc,OAAO,EAAEV,GAAG,CAAC,CAAC,CAACE,KAAK;IAC9C,CAAC,CAAC;EACJ,CAAC;EAED;EACA;EACA;EACAsB,SAAS,EAAGC,UAAU,IAAK;IACzB1B,GAAG,CAAC;MACFG,KAAK,EAAER,OAAO,CACZ;QACE,GAAG+B,UAAU;QACbpB,IAAI,EAAE,YAAY;QAClBqB,QAAQ,EAAE,IAAI;QACdC,SAAS,EAAE;UACTtB,IAAI,EAAER,UAAU,CAAC+B,KAAK;UACtBC,MAAM,EAAE,MAAM;UACdC,KAAK,EAAE;QACT;MACF,CAAC,EACD9B,GAAG,CAAC,CAAC,CAACE,KACR;IACF,CAAC,CAAC;EACJ,CAAC;EAED;EACA;EACA;EACA6B,eAAe,EAAEA,CAACC,MAAM,EAAEC,SAAS,EAAEC,UAAU,KAAK;IAClDnC,GAAG,CAAC;MACFE,KAAK,EAAED,GAAG,CAAC,CAAC,CAACC,KAAK,CAACe,GAAG,CAAER,IAAI,IAAK;QAC/B,IAAIA,IAAI,CAACS,EAAE,KAAKe,MAAM,EAAE;UACtB,OAAO;YACL,GAAGxB,IAAI;YACP2B,IAAI,EAAE;cACJ,GAAG3B,IAAI,CAAC2B,IAAI;cACZ,CAACF,SAAS,GAAGC;YACf;UACF,CAAC;QACH;QACA,OAAO1B,IAAI;MACb,CAAC;IACH,CAAC,CAAC;EACJ;AACF,CAAC,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}